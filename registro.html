<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Santiago Sterling â€” EvaluaciÃ³n de Desarrollo de Software</title>
<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-thin-rounded/css/uicons-thin-rounded.css'>
<style>
  @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
  

  :root {
    --blue: #007AFF;
    --blue-dark: #0056CC;
    --blue-light: #5AC8FA;
    --green: #34C759;
    --red: #FF3B30;
    --orange: #FF9500;
    --purple: #AF52DE;
    --gray1: #1C1C1E;
    --gray2: #2C2C2E;
    --gray3: #3A3A3C;
    --gray4: #48484A;
    --gray5: #636366;
    --gray6: #8E8E93;
    --gray-light: #AEAEB2;
    --bg-primary: #ffffff;
    --bg-secondary: #ffffff;
    --bg-tertiary: #ffffff;
    --bg-card: rgba(224, 224, 224, 0.678);
    --border: rgba(255,255,255,0.1);
    --text-primary: #000000;
    --text-secondary: rgba(255,255,255,0.6);
    --text-tertiary: rgba(180, 180, 180, 0.3);
    --window-chrome: #e9e9e9;
    --window-border: rgba(255,255,255,0.12);
    --blur: blur(20px);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 22px;
    --shadow: 0 2px 6px rgba(0,0,0,0.6);
    --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
    background: #ffffff;
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  /* â”€â”€â”€ WALLPAPER BACKGROUND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .wallpaper {
    position: fixed;
    inset: 0;
    z-index: 0;
  }
  .wallpaper::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
    opacity: 0.5;
    pointer-events: none;
  }

  /* â”€â”€â”€ DOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .dock {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 20px;
    padding: 8px 16px;
    display: flex;
    gap: 10px;
    align-items: center;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5), 0 1px 0 rgba(255,255,255,0.05) inset;
  }
  .dock-item {
    width: 48px; height: 48px;
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 24px;
    cursor: pointer;
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
  }
  .dock-item:hover { transform: scale(1.4) translateY(-8px); }
  .dock-item.active::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px; height: 4px;
    background: var(--text-primary);
    border-radius: 50%;
  }
  .dock-separator {
    width: 1px; height: 36px;
    background: rgba(255,255,255,0.15);
  }

  /* â”€â”€â”€ MENU BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .menubar {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 1000;
    height: 28px;
    background: rgba(245, 245, 247, 0.75); /* Gris Apple translÃºcido */
    backdrop-filter: blur(14px) saturate(180%);
    -webkit-backdrop-filter: blur(14px) saturate(180%);
    border-bottom: 1px solid rgba(255,255,255,0.06);
    display: flex;
    align-items: center;
    padding: 0 16px;
    gap: 16px;
    font-size: 13px;
    font-weight: 500;
  }
  .menubar-logo { font-size: 16px; font-weight: 100;}
  .menubar-item { color: var(--text-primary); opacity: 0.9; cursor: default; white-space: nowrap; }
  .menubar-item:first-of-type { font-weight: 100; }
  .menubar-right { margin-left: auto; display: flex; gap: 12px; align-items: center; }
  .menubar-time { font-size: 13px; font-weight: 100; }
  .menubar-icon { font-size: 14px; font-weight: 100;}

  /* â”€â”€â”€ MAIN CONTAINER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .container {
    position: relative;
    z-index: 10;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px 20px 100px;
  }

  /* â”€â”€â”€ MACOS WINDOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .window {
    width: 100%;
    max-width: 780px;
    background: #F2F2F7;
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 1px solid #E5E5EA;
    border-radius: var(--radius-xl);
    overflow: hidden;
    animation: windowOpen 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
  }

  @keyframes windowOpen {
    from { opacity: 0; transform: scale(0.92) translateY(20px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }

  /* â”€â”€â”€ TITLE BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .titlebar {
    height: 42px;
    background: #C7C7CC;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    display: flex;
    align-items: center;
    padding: 0 16px;
    gap: 0;
    position: relative;
    user-select: none;
  }
  .traffic-lights {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .traffic-light {
    width: 13px; height: 13px;
    border-radius: 50%;
    cursor: pointer;
    position: relative;
    transition: filter 0.15s;
  }
  .traffic-light:hover { filter: brightness(0.85); }
  .traffic-light.close   { background: #FF5F57; border: 0.5px solid rgba(0,0,0,0.2); }
  .traffic-light.minimize{ background: #FEBC2E; border: 0.5px solid rgba(0,0,0,0.2); }
  .traffic-light.maximize{ background: #28C840; border: 0.5px solid rgba(0,0,0,0.2); }
  .window-title {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: 13px;
    font-weight: 400;
    color: rgb(255, 255, 255);
    letter-spacing: -0.1px;
    white-space: nowrap;
  }
  .window-subtitle {
    font-size: 11px;
    color: #777;
    font-weight: 100;
    display: block;
    text-align: center;
  }

  /* â”€â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .progress-bar-container {
    height: 3px;
    background: rgba(255,255,255,0.06);
    position: relative;
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--blue), var(--purple));
    transition: width 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border-radius: 0 2px 2px 0;
  }
  .progress-bar-glow {
    position: absolute;
    top: 0; right: 0;
    width: 60px; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4));
    transform: translateX(60px);
    animation: shimmer 2s infinite;
  }
  @keyframes shimmer {
    0% { transform: translateX(-100px); }
    100% { transform: translateX(200px); }
  }

  /* â”€â”€â”€ WINDOW CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .window-body {
    padding: 10px 10px;
  }

  /* â”€â”€â”€ SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .screen { display: none; }
  .screen.active {
    display: block;
    animation: fadeSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
  }
  @keyframes fadeSlideIn {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
  }
  .screen.slide-out {
    animation: fadeSlideOut 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
  }
  @keyframes fadeSlideOut {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(-20px); }
  }

  /* â”€â”€â”€ LOGO / HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .hero {
    text-align: center;
    margin-bottom: 36px;
  }
  .hero-icon {
    width: 72px; height: 72px;
    margin: 0 auto 16px;
    background: linear-gradient(135deg, var(--blue) 0%, var(--purple) 100%);
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    color:#ffffff;
    font-size: 50px;
    animation: iconPulse 3s ease-in-out infinite;
  }
  .hero h1 {
    font-size: 28px;
    font-weight: 400;
    letter-spacing: -0.5px;
    background: linear-gradient(135deg, #000000 30%, rgba(255,255,255,0.6));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 6px;
  }
  .hero p {
    color: #777;
    font-size: 15px;
    line-height: 1.5;
    max-width: 420px;
    font-weight: 100;
    margin: 0 auto;
  }

  /* â”€â”€â”€ FORM ELEMENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .form-group {
    margin-bottom: 20px;
  }
  .form-label {
    display: block;
    font-size: 13px;
    font-weight: 100;
    color: #000000;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .form-input {
    width: 100%;
    padding: 14px 16px;
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(175, 175, 175, 0.575);
    border-radius: var(--radius-md);
    color: #777;
    font-size: 16px;
    font-weight: 100;
    outline: none;
    transition: var(--transition);
    -webkit-appearance: none;
  }
  .form-input::placeholder { color: #777; font-weight: 100;}
  .form-input:focus {
    border-color: var(--blue);
    background: rgba(0, 122, 255, 0.08);
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
  }
  .form-input.error {
    border-color: var(--red);
    box-shadow: 0 0 0 3px rgba(255, 59, 48, 0.2);
  }
  .form-error {
    font-size: 12px;
    color: var(--red);
    margin-top: 6px;
    display: none;
  }
  .form-error.show { display: block; }
  select.form-input {
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23666' d='M6 8L0 0h12z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    padding-right: 36px;
  }
  select.form-input option { background: #2C2C2E; }

  /* â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 14px 28px;
    border-radius: var(--radius-md);
    font-size: 16px;
    font-weight: 100;
    font-family: inherit;
    cursor: pointer;
    border: none;
    outline: none;
    transition: var(--transition);
    letter-spacing: -0.2px;
    white-space: nowrap;
  }
  .btn-primary {
    background: #0A84FF;
    color: white;
  }
  .btn-primary:hover {
    background: var(--blue-dark);
    transform: translateY(-1px);
  }
  .btn-primary:active { transform: translateY(0); }
  .btn-secondary {
    background: rgba(255,255,255,0.08);
    color: var(--text-primary);
    border: 1px solid rgba(255,255,255,0.1);
  }
  .btn-secondary:hover {
    background: rgba(255,255,255,0.12);
    transform: translateY(-1px);
  }
  .btn-success {
    background: var(--green);
    color: white;
    box-shadow: 0 4px 16px rgba(52, 199, 89, 0.35);
  }
  .btn-success:hover {
    filter: brightness(0.9);
    transform: translateY(-1px);
  }
  .btn-danger {
    background: rgba(255, 59, 48, 0.15);
    color: var(--red);
    border: 1px solid rgba(255, 59, 48, 0.3);
  }
  .btn-full { width: 100%; }
  .btn-group {
    display: flex;
    gap: 12px;
    margin-top: 28px;
  }
  .btn-group .btn { flex: 1; }

  /* â”€â”€â”€ TAGS / BADGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.3px;
    text-transform: uppercase;
  }
  .badge-blue { background: rgba(0,122,255,0.15); color: var(--blue-light); border: 1px solid rgba(0,122,255,0.3); }
  .badge-purple { background: rgba(175,82,222,0.15); color: #d88df5; border: 1px solid rgba(175,82,222,0.3); }
  .badge-green { background: rgba(52,199,89,0.15); color: #5ee57f; border: 1px solid rgba(52,199,89,0.3); }
  .badge-orange { background: rgba(255,149,0,0.15); color: #ffba30; border: 1px solid rgba(255,149,0,0.3); }

  /* â”€â”€â”€ QUIZ INFO CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .info-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 28px;
  }
  .info-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: var(--radius-md);
    padding: 16px;
    text-align: center;
  }
  .info-card-value {
    font-size: 22px;
    font-weight: 700;
    color: var(--blue-light);
    display: block;
    margin-bottom: 2px;
  }
  .info-card-label {
    font-size: 12px;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* â”€â”€â”€ QUESTION SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .question-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
  }
  .question-counter {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500;
  }
  .question-counter strong { color: var(--text-primary); }
  .question-progress {
    display: flex;
    gap: 4px;
  }
  .q-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: rgba(255,255,255,0.15);
    transition: background 0.3s;
  }
  .q-dot.done { background: var(--blue); }
  .q-dot.current { background: var(--blue-light); }

  .question-category {
    margin-bottom: 12px;
  }
  .question-text {
    font-size: 18px;
    font-weight: 600;
    line-height: 1.5;
    letter-spacing: -0.2px;
    color: var(--text-primary);
    margin-bottom: 24px;
  }
  .code-block {
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: var(--radius-sm);
    padding: 14px 16px;
    font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 13px;
    line-height: 1.6;
    color: #a8d2f0;
    margin-bottom: 20px;
    overflow-x: auto;
  }
  .code-block .kw { color: #ff7ab2; }
  .code-block .fn { color: #dabaff; }
  .code-block .str { color: #fc6; }
  .code-block .cm { color: #636366; }
  .code-block .num { color: #5be4ff; }

  /* â”€â”€â”€ ANSWER OPTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .options-grid {
    display: grid;
    gap: 10px;
  }
  .option {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 18px;
    background: rgba(255,255,255,0.04);
    border: 1.5px solid rgba(255,255,255,0.08);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
  }
  .option::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, rgba(0,122,255,0) 0%, rgba(0,122,255,0.04) 100%);
    opacity: 0;
    transition: opacity 0.3s;
  }
  .option:hover::before { opacity: 1; }
  .option:hover {
    border-color: rgba(0, 122, 255, 0.4);
    background: rgba(0, 122, 255, 0.08);
    transform: translateX(3px);
  }
  .option.selected {
    border-color: var(--blue);
    background: rgba(0, 122, 255, 0.12);
  }
  .option.correct {
    border-color: var(--green);
    background: rgba(52, 199, 89, 0.12);
    animation: correctPulse 0.4s ease;
  }
  .option.incorrect {
    border-color: var(--red);
    background: rgba(255, 59, 48, 0.1);
    animation: shake 0.4s ease;
  }
  .option.disabled { pointer-events: none; }
  @keyframes correctPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.01); }
    100% { transform: scale(1); }
  }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-6px); }
    40% { transform: translateX(6px); }
    60% { transform: translateX(-4px); }
    80% { transform: translateX(4px); }
  }
  .option-letter {
    width: 32px; height: 32px;
    border-radius: 8px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 700;
    flex-shrink: 0;
    transition: var(--transition);
    font-variant: all-small-caps;
    letter-spacing: 0.5px;
  }
  .option.selected .option-letter { background: var(--blue); border-color: var(--blue); }
  .option.correct .option-letter { background: var(--green); border-color: var(--green); }
  .option.incorrect .option-letter { background: var(--red); border-color: var(--red); }
  .option-text {
    font-size: 15px;
    font-weight: 500;
    line-height: 1.4;
    color: var(--text-primary);
    flex: 1;
  }
  .option-icon {
    font-size: 18px;
    flex-shrink: 0;
    opacity: 0;
    transition: opacity 0.3s;
  }
  .option.correct .option-icon,
  .option.incorrect .option-icon { opacity: 1; }

  /* â”€â”€â”€ EXPLANATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .explanation {
    display: none;
    margin-top: 16px;
    padding: 14px 16px;
    background: rgba(255,255,255,0.04);
    border-left: 3px solid var(--blue);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.6;
    animation: fadeIn 0.4s ease;
  }
  .explanation.show { display: block; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .explanation strong { color: var(--text-primary); }

  /* â”€â”€â”€ TIMER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .timer-ring {
    position: relative;
    width: 48px; height: 48px;
  }
  .timer-ring svg { transform: rotate(-90deg); }
  .timer-ring-track {
    fill: none;
    stroke: rgba(255,255,255,0.1);
    stroke-width: 3;
  }
  .timer-ring-fill {
    fill: none;
    stroke: var(--blue);
    stroke-width: 3;
    stroke-dasharray: 126;
    stroke-dashoffset: 0;
    transition: stroke-dashoffset 1s linear, stroke 0.3s;
    stroke-linecap: round;
  }
  .timer-text {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
  }

  /* â”€â”€â”€ RESULTS SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .results-hero {
    text-align: center;
    margin-bottom: 32px;
  }
  .score-ring {
    position: relative;
    width: 140px; height: 140px;
    margin: 0 auto 20px;
  }
  .score-ring svg { transform: rotate(-90deg); }
  .score-ring-track {
    fill: none;
    stroke: rgba(255,255,255,0.06);
    stroke-width: 8;
  }
  .score-ring-fill {
    fill: none;
    stroke-width: 8;
    stroke-dasharray: 380;
    stroke-dashoffset: 380;
    transition: stroke-dashoffset 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), stroke 0.5s;
    stroke-linecap: round;
  }
  .score-ring-fill.animated { stroke-dashoffset: var(--target-offset); }
  .score-center {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .score-number {
    font-size: 36px;
    font-weight: 800;
    letter-spacing: -1px;
    line-height: 1;
  }
  .score-label {
    font-size: 12px;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 2px;
  }
  .results-title {
    font-size: 24px;
    font-weight: 700;
    letter-spacing: -0.3px;
    margin-bottom: 6px;
  }
  .results-subtitle {
    font-size: 14px;
    color: var(--text-secondary);
  }
  .stats-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 24px;
  }
  .stat-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: var(--radius-md);
    padding: 16px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
  }
  .stat-card.correct::before { background: var(--green); }
  .stat-card.incorrect::before { background: var(--red); }
  .stat-card.total::before { background: var(--blue); }
  .stat-value {
    font-size: 28px;
    font-weight: 800;
    display: block;
    letter-spacing: -0.5px;
  }
  .stat-card.correct .stat-value { color: var(--green); }
  .stat-card.incorrect .stat-value { color: var(--red); }
  .stat-card.total .stat-value { color: var(--blue-light); }
  .stat-label {
    font-size: 12px;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 2px;
  }

  /* â”€â”€â”€ RESULTS BREAKDOWN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .breakdown-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }
  .breakdown-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .breakdown-item:last-child { border-bottom: none; }
  .breakdown-icon {
    width: 24px; height: 24px;
    border-radius: 6px;
    display: flex; align-items: center; justify-content: center;
    font-size: 12px;
    flex-shrink: 0;
    margin-top: 2px;
  }
  .breakdown-icon.correct { background: rgba(52,199,89,0.2); }
  .breakdown-icon.incorrect { background: rgba(255,59,48,0.2); }
  .breakdown-q {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    line-height: 1.4;
    flex: 1;
  }
  .breakdown-a {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 3px;
  }
  .breakdown-a span { color: var(--green); }
  .breakdown-a span.wrong { color: var(--red); text-decoration: line-through; }

  /* â”€â”€â”€ GRADE BADGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .grade-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
  }
  .grade-letter {
    font-size: 52px;
    font-weight: 800;
    letter-spacing: -2px;
  }

  /* â”€â”€â”€ SCROLLABLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .scrollable {
    max-height: 280px;
    overflow-y: auto;
    padding-right: 6px;
  }
  .scrollable::-webkit-scrollbar { width: 4px; }
  .scrollable::-webkit-scrollbar-track { background: transparent; }
  .scrollable::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

  /* â”€â”€â”€ DIVIDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .divider {
    height: 1px;
    background: rgba(255,255,255,0.06);
    margin: 24px 0;
  }

  /* â”€â”€â”€ WELCOME TIPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tips-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-bottom: 28px;
  }
  .tip-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: var(--radius-md);
    padding: 14px;
    display: flex;
    gap: 10px;
    align-items: flex-start;
  }
  .tip-icon { font-size: 20px; flex-shrink: 0; }
  .tip-text {
    font-size: 13px;
    color: #777;
    line-height: 1.4;
    font-weight: 100;
  }
  .tip-text strong { color: var(--text-primary); display: block; margin-bottom: 2px; }

  /* â”€â”€â”€ NOTIFICATION TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .toast {
    position: fixed;
    top: 48px;
    right: 20px;
    z-index: 9999;
    background: rgba(40,40,42,0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: var(--radius-md);
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    transform: translateX(120%);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    max-width: 280px;
  }
  .toast.show { transform: translateX(0); }
  .toast-icon { font-size: 18px; }

  /* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 600px) {
    .window-body { padding: 24px 20px; }
    .info-grid, .stats-row { grid-template-columns: repeat(3, 1fr); gap: 8px; }
    .tips-grid { grid-template-columns: 1fr; }
    .hero h1 { font-size: 22px; }
    .question-text { font-size: 16px; }
    .btn-group { flex-direction: column; }
    .menubar-item:not(.menubar-logo):not(:first-of-type):not(.menubar-time) { display: none; }
    .dock { display: none; }
    .traffic-lights { display: flex; }
    .score-ring { width: 120px; height: 120px; }
    .score-number { font-size: 28px; }
    .grade-letter { font-size: 40px; }
    .breakdown-a { display: none; }
    .window { border-radius: var(--radius-lg); }
  }

  /* â”€â”€â”€ CONFETTI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .confetti-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9998;
    overflow: hidden;
  }
  .confetti-piece {
    position: absolute;
    width: 8px; height: 8px;
    border-radius: 2px;
    animation: confettiFall linear forwards;
  }
  @keyframes confettiFall {
    0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
  }
</style>
</head>
<body>

<!-- WALLPAPER -->
<div class="wallpaper"></div>

<!-- MENU BAR -->
<div class="menubar">
  <div class="menubar-logo">
  <svg viewBox="0 0 100 100" width="28" height="28">
    <defs>
      <linearGradient id="testGrad" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#5AC8FA"/>
        <stop offset="100%" stop-color="#0A84FF"/>
      </linearGradient>
    </defs>

    <!-- Marco -->
    <rect x="10" y="10" width="80" height="80" rx="18" stroke="url(#testGrad)" stroke-width="5" fill="none"/>

    <!-- S -->
    <path d="M65 30
             C55 22, 35 26, 35 40
             C35 50, 65 48, 65 60
             C65 75, 38 78, 30 68"
          stroke="url(#testGrad)"
          stroke-width="7"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"/>
  </svg>
</div>

  <span class="menubar-item">Prueba de software</span>
  <span class="menubar-item" style="opacity:0.5">Â¡Exitos!</span>
  <div class="menubar-right">
    <span class="menubar-icon">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="1.8"
          stroke-linecap="round" stroke-linejoin="round"
          aria-label="Internet">
        <path d="M5 12.5c4.5-4 9.5-4 14 0"/>
        <path d="M8.5 15.5c2.5-2 4.5-2 7 0"/>
        <path d="M12 19h.01"/>
      </svg>
    </span>

    <span class="menubar-icon">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="1.6"
          stroke-linecap="round" stroke-linejoin="round"
          aria-label="BaterÃ­a">
        <rect x="2.5" y="7" width="17" height="10" rx="2"/>
        <rect x="20" y="10" width="1.5" height="4" rx="0.8"/>
        <rect x="4.5" y="9" width="11" height="6" rx="1"
              fill="currentColor" stroke="none"/>
      </svg>
    </span>

    <span class="menubar-time" id="menubar-clock">00:00</span>
  </div>
</div>


<!-- TOAST -->
<div class="toast" id="toast">
  <span class="toast-icon" id="toast-icon">â„¹ï¸</span>
  <span id="toast-text">Mensaje</span>
</div>

<!-- CONFETTI -->
<div class="confetti-container" id="confetti"></div>

<!-- MAIN -->
<div class="container">
  <div class="window">

    <!-- TITLE BAR -->
    <div class="titlebar">
      <div class="traffic-lights">
        <div class="traffic-light close" onclick="closeWindow()"></div>
        <div class="traffic-light minimize" onclick="minimizeWindow()"></div>
        <div class="traffic-light maximize" onclick="maximizeWindow()"></div>
      </div>
      <div class="window-title">
        <span id="window-title-text">Sterling Quiz â€” EvaluaciÃ³n de Software</span>
        <span class="window-subtitle" id="window-subtitle-text">Desarrollo de Software Â· 15 Preguntas</span>
      </div>
    </div>

    <!-- PROGRESS BAR -->
    <div class="progress-bar-container">
      <div class="progress-bar-fill" id="progress-bar" style="width:0%"></div>
    </div>

    <!-- WINDOW BODY -->
    <div class="window-body">

      <!-- â•â•â•â•â•â•â•â•â•â• SCREEN 1: REGISTRO â•â•â•â•â•â•â•â•â•â• -->
      <div class="screen active" id="screen-register">
        <div class="hero">
          <div class="hero-icon"><i class="fi fi-tr-user-astronaut"></i></div>
          <h1>Sterling Quiz</h1>
          <p>EvalÃºa tus conocimientos en desarrollo de software con 15 preguntas cuidadosamente seleccionadas.</p>
        </div>

        <div class="tips-grid">
          <div class="tip-card">
            <span class="tip-icon"><i class="fi fi-tr-time-forward-ten"></i></span>
            <div class="tip-text"><strong>20 seg/pregunta</strong>Cada pregunta tiene un tiempo lÃ­mite para responder.</div>
          </div>
          <div class="tip-card">
            <span class="tip-icon"><i class="fi fi-tr-block-question"></i></span>
            <div class="tip-text"><strong>15 Preguntas</strong>Temas: Git, OOP, DB, APIs, Algoritmos y mÃ¡s.</div>
          </div>
          <div class="tip-card">
            <span class="tip-icon"><i class="fi fi-tr-lightbulb-exclamation"></i></span>
            <div class="tip-text"><strong>Una oportunidad</strong>No se puede cambiar la respuesta al confirmar.</div>
          </div>
          <div class="tip-card">
            <span class="tip-icon"><i class="fi fi-tr-score-board"></i></span>
            <div class="tip-text"><strong>Descarga tu resultado</strong>Al final recibirÃ¡s un reporte PDF.</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Nombre completo</label>
          <input type="text" class="form-input" id="input-name" placeholder="Ej. Ana GarcÃ­a RodrÃ­guez" autocomplete="off">
          <div class="form-error" id="error-name">Por favor ingresa tu nombre completo.</div>
        </div>

        <div class="form-group">
          <label class="form-label">Correo electrÃ³nico</label>
          <input type="email" class="form-input" id="input-email" placeholder="correo@ejemplo.com" autocomplete="off">
          <div class="form-error" id="error-email">Por favor ingresa un correo vÃ¡lido.</div>
        </div>

        <div class="form-group">
          <label class="form-label">Nivel de experiencia</label>
          <select class="form-input" id="input-level">
            <option value="">Selecciona tu nivel</option>
            <option value="junior">Junior (0â€“2 aÃ±os)</option>
            <option value="mid">Mid-Level (2â€“5 aÃ±os)</option>
            <option value="senior">Senior (5+ aÃ±os)</option>
            <option value="student">Estudiante</option>
          </select>
          <div class="form-error" id="error-level">Por favor selecciona tu nivel.</div>
        </div>

        <button class="btn btn-primary btn-full" onclick="startQuiz()">
          Comenzar EvaluaciÃ³n &nbsp;â†’
        </button>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â• SCREEN 2: PREGUNTA â•â•â•â•â•â•â•â•â•â• -->
      <div class="screen" id="screen-question">
        <div class="question-header">
          <div>
            <span class="question-counter">Pregunta <strong id="q-num">1</strong> de <strong id="q-total">15</strong></span>
          </div>
          <div style="display:flex;align-items:center;gap:12px">
            <div class="timer-ring" id="timer-ring">
              <svg width="48" height="48" viewBox="0 0 48 48">
                <circle class="timer-ring-track" cx="24" cy="24" r="20"/>
                <circle class="timer-ring-fill" id="timer-fill" cx="24" cy="24" r="20"/>
              </svg>
              <div class="timer-text" id="timer-text">20</div>
            </div>
          </div>
        </div>

        <div class="question-progress" id="q-progress"></div>
        <div style="height:16px"></div>

        <div class="question-category" id="q-category"></div>
        <div class="question-text" id="q-text"></div>
        <div class="code-block" id="q-code" style="display:none"></div>

        <div class="options-grid" id="q-options"></div>

        <div class="explanation" id="q-explanation"></div>

        <div class="btn-group" style="margin-top:24px">
          <button class="btn btn-secondary" id="btn-skip" onclick="skipQuestion()">Omitir</button>
          <button class="btn btn-primary" id="btn-next" onclick="nextQuestion()" disabled style="opacity:0.5">
            <span id="btn-next-text">Siguiente â†’</span>
          </button>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â• SCREEN 3: RESULTADOS â•â•â•â•â•â•â•â•â•â• -->
      <div class="screen" id="screen-results">
        <div class="results-hero">
          <div class="score-ring" id="score-ring-container">
            <svg width="140" height="140" viewBox="0 0 140 140">
              <circle class="score-ring-track" cx="70" cy="70" r="60.5"/>
              <circle class="score-ring-fill" id="score-ring-fill" cx="70" cy="70" r="60.5"/>
            </svg>
            <div class="score-center">
              <div class="score-number" id="score-number">0%</div>
              <div class="score-label">CalificaciÃ³n</div>
            </div>
          </div>
          <div class="grade-display">
            <div class="grade-letter" id="grade-letter">-</div>
            <div>
              <div style="font-size:18px;font-weight:700" id="grade-label">-</div>
              <div style="font-size:13px;color:var(--text-secondary)" id="grade-sublabel">-</div>
            </div>
          </div>
          <div class="results-subtitle" id="results-name-display">-</div>
        </div>

        <div class="stats-row">
          <div class="stat-card correct">
            <span class="stat-value" id="stat-correct">0</span>
            <span class="stat-label">âœ… Correctas</span>
          </div>
          <div class="stat-card incorrect">
            <span class="stat-value" id="stat-incorrect">0</span>
            <span class="stat-label">âŒ Incorrectas</span>
          </div>
          <div class="stat-card total">
            <span class="stat-value" id="stat-total">0</span>
            <span class="stat-label">ğŸ“ Total</span>
          </div>
        </div>

        <div class="divider"></div>

        <div class="breakdown-title">Detalle de respuestas</div>
        <div class="scrollable" id="breakdown-list"></div>

        <div class="divider"></div>

        <div class="btn-group">
          <button class="btn btn-secondary" onclick="restartQuiz()">Reintentar</button>
          <button class="btn btn-success" onclick="downloadResults()">Descargar Reporte</button>
        </div>
      </div>

    </div><!-- /window-body -->
  </div><!-- /window -->
</div><!-- /container -->

<!-- DOCK -->
<div class="dock">
  <div class="dock-item active" title="DevQuiz" onclick="goToScreen('register')"><i class="fi fi-tr-display-code"></i></div>
  <div class="dock-item" title="Preguntas" onclick="goToScreen('question')"><i class="fi fi-tr-quiz"></i></div>
  <div class="dock-separator"></div>
  <div class="dock-item" title="Resultados" onclick="goToScreen('results')"><i class="fi fi-tr-score-board"></i></div>
  <div class="dock-separator"></div>
  <div class="dock-item" title="Trash"><i class="fi fi-tr-trash-xmark"></i></div>
</div>

<script>
// â”€â”€â”€ QUESTIONS DATABASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const questions = [
  {
    id: 1, category: "Git & Control de Versiones", categoryColor: "badge-orange",
    text: "Â¿CuÃ¡l es la diferencia entre `git merge` y `git rebase`?",
    options: [
      "Merge combina ramas creando un commit de fusiÃ³n; rebase reescribe el historial de commits de forma lineal.",
      "Son equivalentes y producen el mismo historial de commits.",
      "Rebase combina ramas creando un commit de fusiÃ³n; merge reescribe el historial.",
      "Merge solo funciona con ramas remotas; rebase solo con ramas locales."
    ],
    correct: 0,
    explanation: "<strong>Merge</strong> preserva el historial completo con un commit extra de fusiÃ³n (merge commit). <strong>Rebase</strong> reescribe los commits sobre la rama base, creando un historial mÃ¡s limpio y lineal, pero modifica el SHA de los commits."
  },
  {
    id: 2, category: "Algoritmos & Complejidad", categoryColor: "badge-blue",
    text: "Â¿CuÃ¡l es la complejidad temporal del algoritmo QuickSort en el peor caso?",
    options: [
      "O(n log n)",
      "O(nÂ²)",
      "O(n)",
      "O(log n)"
    ],
    correct: 1,
    explanation: "QuickSort tiene complejidad <strong>O(nÂ²)</strong> en el peor caso (cuando el pivote siempre es el menor o mayor elemento). Sin embargo, en el caso promedio es O(n log n), que es la razÃ³n por la que es muy eficiente en la prÃ¡ctica."
  },
  {
    id: 3, category: "ProgramaciÃ³n Orientada a Objetos", categoryColor: "badge-purple",
    text: "Â¿CuÃ¡l de los siguientes principios SOLID indica que una clase deberÃ­a tener una sola razÃ³n para cambiar?",
    options: [
      "Open/Closed Principle",
      "Liskov Substitution Principle",
      "Single Responsibility Principle",
      "Interface Segregation Principle"
    ],
    correct: 2,
    explanation: "<strong>Single Responsibility Principle (SRP)</strong> establece que cada clase debe tener una Ãºnica responsabilidad. Si una clase tiene mÃºltiples razones para cambiar, tiene mÃºltiples responsabilidades y viola este principio."
  },
  {
    id: 4, category: "Bases de Datos", categoryColor: "badge-green",
    text: "Â¿QuÃ© tipo de JOIN devuelve todos los registros de ambas tablas, con NULL donde no hay coincidencia?",
    code: `-- Â¿QuÃ© tipo de JOIN completa correctamente esta consulta?\nSELECT u.nombre, p.monto\n<span class='kw'>FROM</span> usuarios u\n??? JOIN pagos p <span class='kw'>ON</span> u.id = p.usuario_id;`,
    options: [
      "INNER JOIN",
      "LEFT JOIN",
      "FULL OUTER JOIN",
      "CROSS JOIN"
    ],
    correct: 2,
    explanation: "<strong>FULL OUTER JOIN</strong> retorna todos los registros de ambas tablas. Cuando no hay coincidencia en una tabla, los campos de esa tabla aparecen como NULL. Es la combinaciÃ³n de LEFT y RIGHT JOIN."
  },
  {
    id: 5, category: "APIs & REST", categoryColor: "badge-blue",
    text: "SegÃºn las convenciones REST, Â¿quÃ© cÃ³digo HTTP debe retornar la creaciÃ³n exitosa de un recurso?",
    options: [
      "200 OK",
      "201 Created",
      "204 No Content",
      "202 Accepted"
    ],
    correct: 1,
    explanation: "<strong>201 Created</strong> indica que la solicitud fue exitosa y se creÃ³ un nuevo recurso. La respuesta debe incluir la URL del nuevo recurso en el header <code>Location</code>. El cÃ³digo 200 OK se usa para actualizaciones o lecturas exitosas."
  },
  {
    id: 6, category: "Patrones de DiseÃ±o", categoryColor: "badge-purple",
    text: "Â¿CuÃ¡l patrÃ³n de diseÃ±o asegura que una clase tenga solo UNA instancia en toda la aplicaciÃ³n?",
    options: [
      "Factory Method",
      "Observer",
      "Singleton",
      "Prototype"
    ],
    correct: 2,
    explanation: "El patrÃ³n <strong>Singleton</strong> restringe la instanciaciÃ³n de una clase a un Ãºnico objeto. Se usa comÃºnmente para conexiones de base de datos, logging y configuraciones globales. Sin embargo, debe usarse con cuidado ya que puede dificultar las pruebas unitarias."
  },
  {
    id: 7, category: "JavaScript & Async", categoryColor: "badge-orange",
    text: "Â¿CuÃ¡l es el resultado de ejecutar el siguiente cÃ³digo?",
    code: `<span class='kw'>console</span>.log(<span class='str'>'A'</span>);\nsetTimeout(() => <span class='kw'>console</span>.log(<span class='str'>'B'</span>), <span class='num'>0</span>);\n<span class='kw'>Promise</span>.resolve().<span class='fn'>then</span>(() => <span class='kw'>console</span>.log(<span class='str'>'C'</span>));\n<span class='kw'>console</span>.log(<span class='str'>'D'</span>);`,
    options: [
      "A, B, C, D",
      "A, D, B, C",
      "A, D, C, B",
      "A, C, D, B"
    ],
    correct: 2,
    explanation: "El orden es <strong>A â†’ D â†’ C â†’ B</strong>. El cÃ³digo sÃ­ncrono se ejecuta primero (A, D). Luego las microtasks como Promises (C), y finalmente las macrotasks como setTimeout (B). Este es el comportamiento del Event Loop de JavaScript."
  },
  {
    id: 8, category: "Seguridad Web", categoryColor: "badge-orange",
    text: "Â¿QuÃ© tÃ©cnica de ataque consiste en inyectar scripts maliciosos en pÃ¡ginas web vistas por otros usuarios?",
    options: [
      "SQL Injection",
      "Cross-Site Scripting (XSS)",
      "CSRF (Cross-Site Request Forgery)",
      "Man-in-the-Middle"
    ],
    correct: 1,
    explanation: "<strong>Cross-Site Scripting (XSS)</strong> permite a atacantes inyectar scripts del lado cliente en pÃ¡ginas web. Se previene sanitizando inputs, usando Content Security Policy (CSP) y codificando outputs. Diferente del CSRF, que fuerza acciones no deseadas en nombre del usuario autenticado."
  },
  {
    id: 9, category: "Algoritmos & Estructuras", categoryColor: "badge-blue",
    text: "En una estructura de datos Stack (Pila), Â¿cuÃ¡l es la polÃ­tica de acceso a elementos?",
    options: [
      "FIFO â€” First In, First Out",
      "LIFO â€” Last In, First Out",
      "LILO â€” Last In, Last Out",
      "FILO â€” First In, Last Out (diferente al LIFO)"
    ],
    correct: 1,
    explanation: "Un <strong>Stack</strong> sigue el principio <strong>LIFO (Last In, First Out)</strong>: el Ãºltimo elemento agregado es el primero en salir. Es como una pila de platos. Operaciones: <code>push()</code> para agregar y <code>pop()</code> para remover del tope."
  },
  {
    id: 10, category: "DevOps & Contenedores", categoryColor: "badge-green",
    text: "Â¿CuÃ¡l es la diferencia fundamental entre una imagen Docker y un contenedor Docker?",
    options: [
      "Son exactamente lo mismo, solo tÃ©rminos distintos.",
      "Una imagen es una plantilla inmutable; un contenedor es una instancia en ejecuciÃ³n de esa imagen.",
      "Un contenedor es la plantilla; la imagen es la instancia en ejecuciÃ³n.",
      "Las imÃ¡genes se usan en producciÃ³n; los contenedores solo en desarrollo."
    ],
    correct: 1,
    explanation: "Una <strong>imagen Docker</strong> es un template de solo lectura (inmutable) que incluye el sistema de archivos y configuraciÃ³n. Un <strong>contenedor</strong> es una instancia en ejecuciÃ³n de esa imagen, con su propia capa de escritura. MÃºltiples contenedores pueden correr desde la misma imagen."
  },
  {
    id: 11, category: "ProgramaciÃ³n Funcional", categoryColor: "badge-purple",
    text: "Â¿CuÃ¡l de estas opciones describe correctamente una funciÃ³n pura?",
    options: [
      "Una funciÃ³n que modifica variables globales para mejorar performance.",
      "Una funciÃ³n que siempre retorna el mismo output para el mismo input y no tiene efectos secundarios.",
      "Una funciÃ³n asÃ­ncrona que usa async/await.",
      "Una funciÃ³n que solo puede recibir tipos primitivos como parÃ¡metros."
    ],
    correct: 1,
    explanation: "Una <strong>funciÃ³n pura</strong> tiene dos caracterÃ­sticas: 1) Dado el mismo input, siempre retorna el mismo output (determinismo). 2) No tiene efectos secundarios (no modifica estado externo, no hace I/O). Son fundamentales en programaciÃ³n funcional y facilitan el testing."
  },
  {
    id: 12, category: "Testing", categoryColor: "badge-green",
    text: "En la pirÃ¡mide de testing, Â¿quÃ© tipo de tests deberÃ­an ser MÃS numerosos?",
    options: [
      "Tests E2E (End-to-End)",
      "Tests de IntegraciÃ³n",
      "Tests Unitarios",
      "Tests de UI / AceptaciÃ³n"
    ],
    correct: 2,
    explanation: "SegÃºn la <strong>pirÃ¡mide de testing</strong> de Mike Cohn, los <strong>tests unitarios</strong> deben ser la base y el mÃ¡s numeroso. Son rÃ¡pidos, baratos y aÃ­slan componentes. Los tests de integraciÃ³n van en el medio, y los E2E (lentos y costosos) en la cÃºspide, siendo los menos numerosos."
  },
  {
    id: 13, category: "Bases de Datos", categoryColor: "badge-green",
    text: "Â¿QuÃ© significa la propiedad ACID en bases de datos relacionales?",
    options: [
      "AutomatizaciÃ³n, Consistencia, Integridad, Disponibilidad",
      "Atomicidad, Consistencia, Aislamiento, Durabilidad",
      "Acceso, CachÃ©, Ãndices, DistribuciÃ³n",
      "AutenticaciÃ³n, Cifrado, Integridad, Durabilidad"
    ],
    correct: 1,
    explanation: "<strong>ACID</strong> son las 4 propiedades que garantizan la fiabilidad de transacciones: <strong>Atomicidad</strong> (todo o nada), <strong>Consistencia</strong> (estado vÃ¡lido), <strong>Aislamiento</strong> (transacciones independientes), <strong>Durabilidad</strong> (cambios persistentes aunque haya fallas)."
  },
  {
    id: 14, category: "Arquitectura de Software", categoryColor: "badge-blue",
    text: "Â¿QuÃ© patrÃ³n arquitectÃ³nico describe aplicaciones como un conjunto de servicios pequeÃ±os e independientes que se comunican por APIs?",
    options: [
      "Arquitectura MonolÃ­tica",
      "Arquitectura MVC",
      "Microservicios",
      "Arquitectura Hexagonal"
    ],
    correct: 2,
    explanation: "<strong>Microservicios</strong> divide una aplicaciÃ³n en servicios pequeÃ±os, autÃ³nomos, cada uno con su propia base de datos y lÃ³gica de negocio. Se comunican por APIs (REST, gRPC, mensajes). Ventajas: escalabilidad independiente, despliegues separados. Desventajas: complejidad operacional mayor."
  },
  {
    id: 15, category: "Paradigmas", categoryColor: "badge-purple",
    text: "Â¿CuÃ¡l es el correcto concepto de 'polimorfismo' en ProgramaciÃ³n Orientada a Objetos?",
    code: `<span class='cm'>// Â¿CuÃ¡l es el principio que permite esto?</span>\n<span class='kw'>class</span> <span class='fn'>Animal</span> {\n  <span class='fn'>sonido</span>() { <span class='kw'>return</span> <span class='str'>'...'</span>; }\n}\n<span class='kw'>class</span> <span class='fn'>Perro</span> <span class='kw'>extends</span> <span class='fn'>Animal</span> {\n  <span class='fn'>sonido</span>() { <span class='kw'>return</span> <span class='str'>'Guau'</span>; }\n}\n<span class='kw'>class</span> <span class='fn'>Gato</span> <span class='kw'>extends</span> <span class='fn'>Animal</span> {\n  <span class='fn'>sonido</span>() { <span class='kw'>return</span> <span class='str'>'Miau'</span>; }\n}`,
    options: [
      "Herencia: las subclases heredan mÃ©todos del padre sin modificarlos.",
      "Encapsulamiento: los datos estÃ¡n protegidos dentro de la clase.",
      "Polimorfismo: objetos de distintas clases responden al mismo mensaje de formas diferentes.",
      "AbstracciÃ³n: se ocultan los detalles de implementaciÃ³n al usuario."
    ],
    correct: 2,
    explanation: "El cÃ³digo muestra <strong>Polimorfismo</strong>: diferentes clases (Perro, Gato) implementan el mismo mÃ©todo (<code>sonido()</code>) con comportamientos distintos. Permite tratar objetos de diferentes tipos de manera uniforme a travÃ©s de una interfaz comÃºn, siendo uno de los pilares de OOP."
  }
];

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let state = {
  name: '', email: '', level: '',
  currentQ: 0, answers: [],
  timerInterval: null, timeLeft: 20,
  quizStarted: false
};

// â”€â”€â”€ CLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateClock() {
  const now = new Date();
  document.getElementById('menubar-clock').textContent =
    now.toLocaleTimeString('es', {hour:'2-digit',minute:'2-digit'});
}
setInterval(updateClock, 1000);
updateClock();

// â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(msg, icon='â„¹ï¸', dur=2500) {
  const t = document.getElementById('toast');
  document.getElementById('toast-text').textContent = msg;
  document.getElementById('toast-icon').textContent = icon;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), dur);
}

// â”€â”€â”€ TRAFFIC LIGHTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function closeWindow() { showToast('Â¡No cierres la ventana! ', ''); }
function minimizeWindow() { showToast('Ventana minimizada', ''); }
function maximizeWindow() { showToast('Ventana maximizada', ''); }

// â”€â”€â”€ PROGRESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateProgress(pct) {
  document.getElementById('progress-bar').style.width = pct + '%';
}

// â”€â”€â”€ SCREEN NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goToScreen(name) {
  const all = document.querySelectorAll('.screen');
  all.forEach(s => { s.classList.remove('active'); });
  const target = document.getElementById('screen-' + name);
  if (target) {
    target.classList.add('active');
    const dockItems = document.querySelectorAll('.dock-item');
    dockItems.forEach(d => d.classList.remove('active'));
    const idx = {register:0, question:1, results:3};
    if(idx[name] !== undefined) dockItems[idx[name]]?.classList.add('active');
  }
}

// â”€â”€â”€ START QUIZ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startQuiz() {
  const name = document.getElementById('input-name').value.trim();
  const email = document.getElementById('input-email').value.trim();
  const level = document.getElementById('input-level').value;

  let valid = true;
  document.querySelectorAll('.form-input').forEach(i => i.classList.remove('error'));
  document.querySelectorAll('.form-error').forEach(e => e.classList.remove('show'));

  if (!name || name.length < 3) {
    document.getElementById('input-name').classList.add('error');
    document.getElementById('error-name').classList.add('show');
    valid = false;
  }
  if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    document.getElementById('input-email').classList.add('error');
    document.getElementById('error-email').classList.add('show');
    valid = false;
  }
  if (!level) {
    document.getElementById('input-level').classList.add('error');
    document.getElementById('error-level').classList.add('show');
    valid = false;
  }
  if (!valid) { showToast('Completa todos los campos'); return; }

  state.name = name; state.email = email; state.level = level;
  state.answers = []; state.currentQ = 0; state.quizStarted = true;

  document.getElementById('window-title-text').textContent = `DevQuiz â€” ${name}`;

  goToScreen('question');
  renderQuestion();
  showToast(`Â¡Buena suerte, ${name.split(' ')[0]}!`, 3000);
}

// â”€â”€â”€ RENDER QUESTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderQuestion() {
  const q = questions[state.currentQ];
  const idx = state.currentQ;
  const total = questions.length;

  // Header
  document.getElementById('q-num').textContent = idx + 1;
  document.getElementById('q-total').textContent = total;
  document.getElementById('window-subtitle-text').textContent =
    `Pregunta ${idx+1}/${total} â€” ${q.category}`;
  updateProgress(((idx) / total) * 100);

  // Dots
  const dots = document.getElementById('q-progress');
  dots.innerHTML = '';
  for (let i = 0; i < total; i++) {
    const d = document.createElement('div');
    d.className = 'q-dot' + (i < idx ? ' done' : i === idx ? ' current' : '');
    dots.appendChild(d);
  }

  // Category
  document.getElementById('q-category').innerHTML =
    `<span class="badge ${q.categoryColor}">${q.category}</span>`;

  // Text
  document.getElementById('q-text').textContent = q.text;

  // Code block
  const codeEl = document.getElementById('q-code');
  if (q.code) {
    codeEl.style.display = 'block';
    codeEl.innerHTML = q.code;
  } else { codeEl.style.display = 'none'; }

  // Options
  const optsEl = document.getElementById('q-options');
  optsEl.innerHTML = '';
  const letters = ['A', 'B', 'C', 'D'];
  q.options.forEach((opt, i) => {
    const div = document.createElement('div');
    div.className = 'option';
    div.dataset.index = i;
    div.innerHTML = `
      <div class="option-letter">${letters[i]}</div>
      <div class="option-text">${opt}</div>
      <div class="option-icon" id="opt-icon-${i}"></div>`;
    div.onclick = () => selectOption(i);
    optsEl.appendChild(div);
  });

  // Explanation
  const expEl = document.getElementById('q-explanation');
  expEl.classList.remove('show');
  expEl.innerHTML = '';

  // Next button
  const nextBtn = document.getElementById('btn-next');
  nextBtn.disabled = true;
  nextBtn.style.opacity = '0.5';
  document.getElementById('btn-next-text').textContent =
    idx === total - 1 ? 'Ver Resultados' : 'Siguiente â†’';

  document.getElementById('btn-skip').style.display = 'inline-flex';

  // Timer
  startTimer();
}

// â”€â”€â”€ TIMER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startTimer() {
  clearInterval(state.timerInterval);
  state.timeLeft = 60;
  updateTimerUI(60);
  state.timerInterval = setInterval(() => {
    state.timeLeft--;
    updateTimerUI(state.timeLeft);
    if (state.timeLeft <= 0) {
      clearInterval(state.timerInterval);
      timeUp();
    }
  }, 1000);
}

function updateTimerUI(t) {
  const fill = document.getElementById('timer-fill');
  const text = document.getElementById('timer-text');
  const pct = t / 60;
  const circum = 126;
  fill.style.strokeDashoffset = circum - (circum * pct);
  text.textContent = t;
  if (t <= 5) {
    fill.style.stroke = '#FF3B30';
    text.style.color = '#FF3B30';
  } else if (t <= 10) {
    fill.style.stroke = '#FF9500';
    text.style.color = '#FF9500';
  } else {
    fill.style.stroke = 'var(--blue)';
    text.style.color = 'var(--text-primary)';
  }
}

function timeUp() {
  showToast('Â¡Tiempo agotado! â°', 'â±ï¸');
  // Mark as incorrect/skipped
  const q = questions[state.currentQ];
  state.answers[state.currentQ] = {
    selected: -1, correct: q.correct,
    isCorrect: false, skipped: true
  };
  revealAnswer(-1);
}

// â”€â”€â”€ SELECT OPTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectOption(i) {
  const opts = document.querySelectorAll('.option');
  const alreadyAnswered = state.answers[state.currentQ] !== undefined;
  if (alreadyAnswered) return;

  clearInterval(state.timerInterval);
  const q = questions[state.currentQ];

  state.answers[state.currentQ] = {
    selected: i, correct: q.correct,
    isCorrect: i === q.correct, skipped: false
  };

  revealAnswer(i);
}

function revealAnswer(selected) {
  const q = questions[state.currentQ];
  const opts = document.querySelectorAll('.option');
  opts.forEach(o => o.classList.add('disabled'));

  opts.forEach((o, i) => {
    if (i === q.correct) {
      o.classList.add('correct');
      o.querySelector('.option-icon').textContent = 'âœ…';
    }
    if (selected !== -1 && i === selected && selected !== q.correct) {
      o.classList.add('incorrect');
      o.querySelector('.option-icon').textContent = 'âŒ';
    }
  });

  // Explanation
  const expEl = document.getElementById('q-explanation');
  expEl.innerHTML = q.explanation;
  expEl.classList.add('show');

  // Next button
  const nextBtn = document.getElementById('btn-next');
  nextBtn.disabled = false;
  nextBtn.style.opacity = '1';
  document.getElementById('btn-skip').style.display = 'none';
}

// â”€â”€â”€ SKIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function skipQuestion() {
  clearInterval(state.timerInterval);
  const q = questions[state.currentQ];
  state.answers[state.currentQ] = {
    selected: -1, correct: q.correct,
    isCorrect: false, skipped: true
  };
  revealAnswer(-1);
}

// â”€â”€â”€ NEXT QUESTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function nextQuestion() {
  if (state.currentQ < questions.length - 1) {
    state.currentQ++;
    renderQuestion();
  } else {
    finishQuiz();
  }
}

// â”€â”€â”€ FINISH QUIZ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function finishQuiz() {
  clearInterval(state.timerInterval);
  updateProgress(100);
  goToScreen('results');
  renderResults();
}

// â”€â”€â”€ RENDER RESULTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderResults() {
  const answers = state.answers;
  const total = questions.length;
  let correct = 0;
  answers.forEach(a => { if (a && a.isCorrect) correct++; });
  const incorrect = total - correct;
  const pct = Math.round((correct / total) * 100);

  // Stat cards
  document.getElementById('stat-correct').textContent = correct;
  document.getElementById('stat-incorrect').textContent = incorrect;
  document.getElementById('stat-total').textContent = total;

  // Score ring
  const fill = document.getElementById('score-ring-fill');
  const circum = 380;
  const targetOffset = circum - (circum * pct / 100);
  fill.style.cssText = `stroke-dasharray:${circum};stroke-dashoffset:${circum};`;

  // Color
  let color, grade, label, sublabel;
  if (pct >= 90) { color='#34C759'; grade='A+'; label='Â¡Sobresaliente!'; sublabel='Conocimiento excepcional ğŸ†'; }
  else if (pct >= 80) { color='#34C759'; grade='A'; label='Â¡Excelente!'; sublabel='Muy por encima del promedio ğŸ¯'; }
  else if (pct >= 70) { color='#5AC8FA'; grade='B'; label='Â¡Muy Bien!'; sublabel='SÃ³lido conocimiento tÃ©cnico ğŸ’ª'; }
  else if (pct >= 60) { color='#FF9500'; grade='C'; label='Bien'; sublabel='Hay Ã¡reas por fortalecer ğŸ“š'; }
  else if (pct >= 50) { color='#FF9500'; grade='D'; label='Regular'; sublabel='Sigue practicando ğŸ”§'; }
  else { color='#FF3B30'; grade='F'; label='Insuficiente'; sublabel='Necesitas mÃ¡s estudio ğŸ“–'; }

  fill.style.stroke = color;
  const scoreNum = document.getElementById('score-number');
  scoreNum.style.color = color;

  // Animate score ring
  requestAnimationFrame(() => {
    setTimeout(() => {
      fill.style.transition = 'stroke-dashoffset 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      fill.style.strokeDashoffset = targetOffset;
    }, 100);
  });

  // Animate number
  let n = 0;
  const interval = setInterval(() => {
    n = Math.min(n + 2, pct);
    scoreNum.textContent = n + '%';
    if (n >= pct) clearInterval(interval);
  }, 30);

  // Grade
  const gradeEl = document.getElementById('grade-letter');
  gradeEl.textContent = grade;
  gradeEl.style.color = color;
  document.getElementById('grade-label').textContent = label;
  document.getElementById('grade-sublabel').textContent = sublabel;
  document.getElementById('results-name-display').textContent =
    `${state.name} Â· ${state.level.charAt(0).toUpperCase() + state.level.slice(1)} Â· ${new Date().toLocaleDateString('es-MX', {day:'numeric',month:'long',year:'numeric'})}`;
  document.getElementById('window-subtitle-text').textContent = `Resultado Final: ${pct}% â€” ${label}`;

  // Breakdown
  const breakdown = document.getElementById('breakdown-list');
  breakdown.innerHTML = '';
  questions.forEach((q, i) => {
    const ans = answers[i] || {isCorrect:false, selected:-1, skipped:true};
    const div = document.createElement('div');
    div.className = 'breakdown-item';
    const correctText = q.options[q.correct];
    const selectedText = ans.selected >= 0 ? q.options[ans.selected] : 'â€”';
    div.innerHTML = `
      <div class="breakdown-icon ${ans.isCorrect ? 'correct' : 'incorrect'}">
        ${ans.isCorrect ? 'âœ…' : 'âŒ'}
      </div>
      <div>
        <div class="breakdown-q">${i+1}. ${q.text.length > 70 ? q.text.substring(0,70)+'â€¦' : q.text}</div>
        <div class="breakdown-a">
          ${ans.isCorrect
            ? `<span>âœ“ ${correctText.length>60?correctText.substring(0,60)+'â€¦':correctText}</span>`
            : `<span class="wrong">${selectedText.length>40?selectedText.substring(0,40)+'â€¦':selectedText}</span>
               &nbsp;â†’&nbsp;<span>${correctText.length>40?correctText.substring(0,40)+'â€¦':correctText}</span>`
          }
        </div>
      </div>`;
    breakdown.appendChild(div);
  });

  // Confetti if passing
  if (pct >= 70) spawnConfetti();
}

// â”€â”€â”€ CONFETTI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function spawnConfetti() {
  const container = document.getElementById('confetti');
  const colors = ['#007AFF','#34C759','#FF9500','#AF52DE','#FF3B30','#5AC8FA','#FFD60A'];
  for (let i = 0; i < 80; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.cssText = `
      left:${Math.random()*100}%;
      top:${Math.random()*-20}%;
      background:${colors[Math.floor(Math.random()*colors.length)]};
      width:${4+Math.random()*8}px;
      height:${4+Math.random()*8}px;
      border-radius:${Math.random()>0.5?'50%':'2px'};
      animation-duration:${2+Math.random()*3}s;
      animation-delay:${Math.random()*1.5}s;
    `;
    container.appendChild(piece);
    setTimeout(() => piece.remove(), 6000);
  }
}

// â”€â”€â”€ RESTART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function restartQuiz() {
  state.answers = []; state.currentQ = 0; state.quizStarted = false;
  updateProgress(0);
  document.getElementById('window-title-text').textContent = 'DevQuiz â€” EvaluaciÃ³n de Software';
  document.getElementById('window-subtitle-text').textContent = 'Desarrollo de Software Â· 15 Preguntas';
  goToScreen('register');
  showToast('Â¡EvaluaciÃ³n reiniciada! ğŸ”„', 'âœ¨');
}

// â”€â”€â”€ DOWNLOAD RESULTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function downloadResults() {
  const answers = state.answers;
  const total = questions.length;
  let correct = 0;
  answers.forEach(a => { if (a && a.isCorrect) correct++; });
  const incorrect = total - correct;
  const pct = Math.round((correct / total) * 100);

  let grade, color;
  if (pct >= 90) { grade='A+ Sobresaliente'; color='#34C759'; }
  else if (pct >= 80) { grade='A Excelente'; color='#34C759'; }
  else if (pct >= 70) { grade='B Muy Bien'; color='#5AC8FA'; }
  else if (pct >= 60) { grade='C Bien'; color='#FF9500'; }
  else if (pct >= 50) { grade='D Regular'; color='#FF9500'; }
  else { grade='F Insuficiente'; color='#FF3B30'; }

  const levelMap = {junior:'Junior (0-2 aÃ±os)', mid:'Mid-Level (2-5 aÃ±os)', senior:'Senior (5+ aÃ±os)', student:'Estudiante'};
  const date = new Date().toLocaleDateString('es-MX', {weekday:'long',day:'numeric',month:'long',year:'numeric'});
  const time = new Date().toLocaleTimeString('es-MX', {hour:'2-digit',minute:'2-digit'});

  let breakdownRows = '';
  questions.forEach((q, i) => {
    const ans = answers[i] || {isCorrect:false,selected:-1,skipped:true};
    const icon = ans.isCorrect ? 'âœ…' : ans.skipped ? 'â­ï¸' : 'âŒ';
    const status = ans.isCorrect ? 'Correcta' : ans.skipped ? 'Omitida' : 'Incorrecta';
    const statusColor = ans.isCorrect ? '#34C759' : ans.skipped ? '#FF9500' : '#FF3B30';
    breakdownRows += `
      <tr style="border-bottom:1px solid #2a2a2e">
        <td style="padding:10px 12px;font-size:13px;color:#999;text-align:center">${i+1}</td>
        <td style="padding:10px 12px;font-size:13px;color:#e0e0e0;line-height:1.4">${q.text.length>80?q.text.substring(0,80)+'â€¦':q.text}</td>
        <td style="padding:10px 12px;font-size:12px;color:#b0b0b0;line-height:1.4">${q.options[q.correct].length>50?q.options[q.correct].substring(0,50)+'â€¦':q.options[q.correct]}</td>
        <td style="padding:10px 12px;text-align:center">
          <span style="background:${statusColor}20;color:${statusColor};border:1px solid ${statusColor}40;padding:3px 8px;border-radius:20px;font-size:11px;font-weight:600">${icon} ${status}</span>
        </td>
      </tr>`;
  });

  const html = `<!DOCTYPE html>
<html lang="es"><head><meta charset="UTF-8">
<title>Reporte DevQuiz â€” ${state.name}</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif; background:#0a0a0c; color:#e0e0e0; min-height:100vh; }
  @media print {
    body { background:#fff; color:#000; }
    .no-print { display:none; }
  }
</style></head>
<body>
<div style="max-width:800px;margin:0 auto;padding:40px 20px">

  <!-- HEADER -->
  <div style="background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f3460 100%);border-radius:20px;padding:40px;text-align:center;margin-bottom:32px;border:1px solid rgba(255,255,255,0.08)">
    <div style="width:72px;height:72px;background:linear-gradient(135deg,#007AFF,#AF52DE);border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:34px;margin:0 auto 20px;box-shadow:0 8px 32px rgba(0,122,255,0.4)">ğŸ’»</div>
    <div style="font-size:13px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:#007AFF;margin-bottom:8px">REPORTE DE EVALUACIÃ“N</div>
    <h1 style="font-size:32px;font-weight:800;letter-spacing:-1px;margin-bottom:4px">DevQuiz</h1>
    <div style="font-size:14px;color:rgba(255,255,255,0.5)">EvaluaciÃ³n de Desarrollo de Software</div>
  </div>

  <!-- CANDIDATE INFO -->
  <div style="background:#1c1c1e;border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:28px;margin-bottom:24px">
    <div style="font-size:11px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:#636366;margin-bottom:16px">DATOS DEL CANDIDATO</div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
      <div>
        <div style="font-size:12px;color:#636366;margin-bottom:4px">NOMBRE COMPLETO</div>
        <div style="font-size:18px;font-weight:700">${state.name}</div>
      </div>
      <div>
        <div style="font-size:12px;color:#636366;margin-bottom:4px">CORREO ELECTRÃ“NICO</div>
        <div style="font-size:15px;color:#5AC8FA">${state.email}</div>
      </div>
      <div>
        <div style="font-size:12px;color:#636366;margin-bottom:4px">NIVEL</div>
        <div style="font-size:15px;font-weight:600">${levelMap[state.level]||state.level}</div>
      </div>
      <div>
        <div style="font-size:12px;color:#636366;margin-bottom:4px">FECHA Y HORA</div>
        <div style="font-size:14px">${date}, ${time}</div>
      </div>
    </div>
  </div>

  <!-- SCORE CARD -->
  <div style="background:#1c1c1e;border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:28px;margin-bottom:24px;text-align:center">
    <div style="font-size:72px;font-weight:900;color:${color};letter-spacing:-4px;line-height:1;margin-bottom:8px">${pct}<span style="font-size:40px">%</span></div>
    <div style="font-size:22px;font-weight:700;color:${color};margin-bottom:20px">${grade}</div>
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:24px">
      <div style="background:#2c2c2e;border-radius:12px;padding:16px;border-top:2px solid #34C759">
        <div style="font-size:32px;font-weight:800;color:#34C759">${correct}</div>
        <div style="font-size:12px;color:#636366;margin-top:4px;text-transform:uppercase;letter-spacing:0.5px">âœ… Correctas</div>
      </div>
      <div style="background:#2c2c2e;border-radius:12px;padding:16px;border-top:2px solid #FF3B30">
        <div style="font-size:32px;font-weight:800;color:#FF3B30">${incorrect}</div>
        <div style="font-size:12px;color:#636366;margin-top:4px;text-transform:uppercase;letter-spacing:0.5px">âŒ Incorrectas</div>
      </div>
      <div style="background:#2c2c2e;border-radius:12px;padding:16px;border-top:2px solid #007AFF">
        <div style="font-size:32px;font-weight:800;color:#5AC8FA">${total}</div>
        <div style="font-size:12px;color:#636366;margin-top:4px;text-transform:uppercase;letter-spacing:0.5px">ğŸ“ Total</div>
      </div>
    </div>
  </div>

  <!-- BREAKDOWN TABLE -->
  <div style="background:#1c1c1e;border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:28px;margin-bottom:24px">
    <div style="font-size:11px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:#636366;margin-bottom:20px">DETALLE DE RESPUESTAS</div>
    <table style="width:100%;border-collapse:collapse">
      <thead>
        <tr style="border-bottom:1px solid #3a3a3c">
          <th style="padding:8px 12px;font-size:11px;color:#636366;text-align:center;font-weight:600;letter-spacing:0.5px">#</th>
          <th style="padding:8px 12px;font-size:11px;color:#636366;text-align:left;font-weight:600;letter-spacing:0.5px">PREGUNTA</th>
          <th style="padding:8px 12px;font-size:11px;color:#636366;text-align:left;font-weight:600;letter-spacing:0.5px">RESPUESTA CORRECTA</th>
          <th style="padding:8px 12px;font-size:11px;color:#636366;text-align:center;font-weight:600;letter-spacing:0.5px">RESULTADO</th>
        </tr>
      </thead>
      <tbody>${breakdownRows}</tbody>
    </table>
  </div>

  <!-- FOOTER -->
  <div style="text-align:center;padding:20px;color:#3a3a3c;font-size:13px">
    <div>ğŸ DevQuiz â€” EvaluaciÃ³n de Desarrollo de Software</div>
    <div style="margin-top:4px">Generado el ${date} Â· ${time}</div>
  </div>

  <div class="no-print" style="text-align:center;margin-top:24px">
    <button onclick="window.print()" style="background:#007AFF;color:white;border:none;padding:14px 32px;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;font-family:inherit">ğŸ–¨ï¸ Imprimir / Guardar como PDF</button>
  </div>

</div>
</body></html>`;

  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  const safeName = state.name.replace(/\s+/g,'_').replace(/[^a-zA-Z0-9_Ã¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“ÃšÃ±Ã‘]/g,'');
  a.href = url;
  a.download = `DevQuiz_Reporte_${safeName}.html`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  showToast('Â¡Reporte descargado! ğŸ“„', 'âœ…', 3000);
}
</script>
</body>
</html>
`;
