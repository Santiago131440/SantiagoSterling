<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Red Pericial - Medical Legal Excellence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500&family=Crimson+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;1,200;1,300;1,400&family=Italiana&family=Cinzel:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --noir: #0D0D0D;
            --charcoal: #1A1A1A;
            --midnight: #0F1419;
            --gold: #D4AF37;
            --gold-light: #F4E4B4;
            --gold-dark: #B8941E;
            --cream: #FAF8F3;
            --pearl: #E8E6E1;
            --smoke: #C4C4C4;
            --shadow: rgba(13, 13, 13, 0.8);
            --medical-blue: #1E90FF;
            --medical-red: #DC143C;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        ::selection {
            background: var(--gold);
            color: var(--noir);
        }

        body {
            font-family: 'Crimson Pro', serif;
            color: var(--charcoal);
            overflow-x: hidden;
            background: var(--cream);
            line-height: 1.7;
            font-size: 18px;
            font-weight: 300;
        }

        body {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="2" fill="%23D4AF37"/><circle cx="12" cy="12" r="6" fill="none" stroke="%23D4AF37" stroke-width="0.5"/></svg>') 12 12, auto;
        }

        a, button {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" fill="%23D4AF37"/></svg>') 12 12, pointer;
        }

        /* Story Progress Bar */
        .story-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), var(--medical-blue));
            z-index: 10000;
            transition: width 0.1s ease;
        }

        /* Chapter Navigation */
        .chapter-nav {
            position: fixed;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .chapter-dot {
            width: 12px;
            height: 12px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            background: transparent;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
        }

        .chapter-dot.active {
            background: var(--gold);
            box-shadow: 0 0 20px var(--gold);
        }

        .chapter-dot:hover::after {
            content: attr(data-chapter);
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--noir);
            color: var(--gold);
            padding: 8px 15px;
            border-radius: 5px;
            white-space: nowrap;
            font-size: 12px;
            font-family: 'Cinzel', serif;
            letter-spacing: 0.1em;
        }

        /* Story Transitions */
        .story-transition {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--noir);
            position: relative;
            overflow: hidden;
        }

        .transition-content {
            text-align: center;
            color: var(--gold);
            padding: 4rem;
        }

        .transition-number {
            font-family: 'Cinzel', serif;
            font-size: 15rem;
            font-weight: 200;
            opacity: 0.1;
            line-height: 1;
            margin-bottom: 2rem;
        }

        .transition-title {
            font-family: 'Cinzel', serif;
            font-size: 4rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .transition-subtitle {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            font-style: italic;
            color: var(--pearl);
        }

        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: linear-gradient(180deg, rgba(13, 13, 13, 0.98) 0%, rgba(13, 13, 13, 0.85) 100%);
            backdrop-filter: blur(30px) saturate(150%);
            z-index: 1000;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            border-bottom: 1px solid rgba(212, 175, 55, 0.15);
        }

        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            opacity: 0;
            transition: opacity 0.6s;
        }

        header.scrolled::after {
            opacity: 1;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2.5rem 10%;
            max-width: 1800px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .logo-main {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            font-weight: 600;
            color: var(--gold);
            letter-spacing: 0.3em;
            text-transform: uppercase;
            position: relative;
        }

        .logo-separator {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .logo-subtitle {
            font-family: 'Italiana', serif;
            font-size: 0.75rem;
            letter-spacing: 0.4em;
            color: var(--pearl);
            text-transform: uppercase;
            text-align: center;
        }

        .nav-links {
            display: flex;
            gap: 4rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--pearl);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 400;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            padding: 0.5rem 0;
            font-family: 'Crimson Pro', serif;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 100%;
            height: 1px;
            background: var(--gold);
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform-origin: center;
        }

        .nav-links a:hover {
            color: var(--gold);
            letter-spacing: 0.25em;
        }

        .nav-links a:hover::before {
            transform: translateX(-50%) scaleX(1);
        }

        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: linear-gradient(135deg, var(--midnight) 0%, var(--noir) 100%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 50%, rgba(212, 175, 55, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 70% 50%, rgba(30, 144, 255, 0.02) 0%, transparent 50%);
            background-size: 100% 100%;
            animation: breathe 20s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(212, 175, 55, 0.03) 2px, rgba(212, 175, 55, 0.03) 4px);
            pointer-events: none;
        }

        #canvas-3d {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0.85;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            padding: 4rem;
            max-width: 1400px;
        }

        .hero-ornament {
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 0 auto 3rem;
            position: relative;
            opacity: 0;
        }

        .hero-ornament::before,
        .hero-ornament::after {
            content: '‚óÜ';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.6rem;
            color: var(--gold);
        }

        .hero-ornament::before {
            left: -20px;
        }

        .hero-ornament::after {
            right: -20px;
        }

        .hero-label {
            font-family: 'Italiana', serif;
            font-size: 0.9rem;
            letter-spacing: 0.5em;
            color: var(--gold);
            margin-bottom: 2.5rem;
            opacity: 0;
            text-transform: uppercase;
        }

        .hero h1 {
            font-family: 'Cinzel', serif;
            font-size: 6.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            opacity: 0;
            line-height: 1.1;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .hero h1 .thin {
            font-weight: 300;
            display: block;
            font-size: 0.85em;
            margin-top: 1rem;
        }

        .hero h1 .accent {
            color: var(--gold);
            font-style: italic;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 400;
        }

        .hero .tagline {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2rem;
            font-weight: 300;
            font-style: italic;
            margin-bottom: 2rem;
            color: var(--gold-light);
            opacity: 0;
            line-height: 1.5;
        }

        .hero .description {
            font-size: 1.15rem;
            font-weight: 300;
            line-height: 1.9;
            margin-bottom: 4rem;
            opacity: 0;
            color: var(--pearl);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-cta {
            display: flex;
            gap: 2.5rem;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            opacity: 0;
        }

        .btn-primary,
        .btn-secondary {
            padding: 1.5rem 4rem;
            text-decoration: none;
            font-family: 'Crimson Pro', serif;
            font-weight: 400;
            font-size: 0.95rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            display: inline-block;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--gold);
        }

        .btn-primary {
            background: var(--gold);
            color: var(--noir);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.8s;
        }

        .btn-primary:hover {
            background: var(--gold-light);
            transform: translateY(-3px);
            box-shadow: 0 20px 60px rgba(212, 175, 55, 0.4);
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-secondary {
            background: transparent;
            color: var(--gold);
        }

        .btn-secondary:hover {
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-3px);
        }

        .section-divider {
            width: 150px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 5rem auto;
            position: relative;
        }

        .section-divider::before {
            content: '‚óÜ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.7rem;
            color: var(--gold);
            background: var(--cream);
            padding: 0 1rem;
        }

        section {
            padding: 10rem 10%;
            max-width: 1800px;
            margin: 0 auto;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 8rem;
            position: relative;
        }

        .section-number {
            font-family: 'Cinzel', serif;
            font-size: 8rem;
            font-weight: 200;
            color: var(--gold);
            opacity: 0.08;
            position: absolute;
            top: -5rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 0;
            letter-spacing: 0.1em;
        }

        .section-label {
            font-family: 'Italiana', serif;
            font-size: 0.85rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 2rem;
            opacity: 0;
            position: relative;
            z-index: 1;
        }

        .section-title {
            font-family: 'Cinzel', serif;
            font-size: 4.5rem;
            font-weight: 500;
            color: var(--charcoal);
            margin-bottom: 2.5rem;
            opacity: 0;
            line-height: 1.2;
            letter-spacing: 0.03em;
            position: relative;
            z-index: 1;
        }

        .section-subtitle {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            font-weight: 300;
            font-style: italic;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0;
            line-height: 1.8;
        }

        .stats-section {
            background: linear-gradient(135deg, var(--noir) 0%, var(--midnight) 50%, var(--charcoal) 100%);
            color: white;
            padding: 8rem 10%;
            position: relative;
            overflow: hidden;
        }

        .stats-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.04) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(30, 144, 255, 0.04) 0%, transparent 50%);
            animation: float 30s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, 20px); }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            padding: 4rem 3rem;
            border-right: 1px solid rgba(212, 175, 55, 0.15);
            opacity: 0;
            transform: translateY(50px);
            position: relative;
        }

        .stat-item:last-child {
            border-right: none;
        }

        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 2px;
            background: var(--gold);
            opacity: 0;
            transition: opacity 0.6s;
        }

        .stat-item:hover::before {
            opacity: 1;
        }

        .stat-number {
            font-family: 'Cinzel', serif;
            font-size: 5.5rem;
            font-weight: 300;
            color: var(--gold);
            display: block;
            margin-bottom: 1.5rem;
            line-height: 1;
            letter-spacing: 0.05em;
        }

        .stat-label {
            font-family: 'Crimson Pro', serif;
            font-size: 1rem;
            color: var(--pearl);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            font-weight: 300;
        }

        .especialidades {
            background: var(--cream);
        }

        .especialidades-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0;
            margin-top: 6rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .especialidad-item {
            padding: 5rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            border-right: 1px solid rgba(212, 175, 55, 0.2);
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            background: white;
        }

        .especialidad-item:nth-child(2n) {
            border-right: none;
        }

        .especialidad-item:nth-last-child(-n+2) {
            border-bottom: none;
        }

        .especialidad-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, rgba(212, 175, 55, 0.03), transparent);
            transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 0;
        }

        .especialidad-item:hover::before {
            width: 100%;
        }

        .especialidad-item:hover {
            transform: translateY(0);
        }

        .especialidad-number {
            font-family: 'Cinzel', serif;
            font-size: 4rem;
            font-weight: 200;
            color: var(--gold);
            opacity: 0.15;
            position: absolute;
            top: 3rem;
            right: 3rem;
            z-index: 0;
        }

        .especialidad-icon {
            font-size: 3.5rem;
            margin-bottom: 2.5rem;
            color: var(--gold);
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .especialidad-item h3 {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            color: var(--charcoal);
            letter-spacing: 0.05em;
            position: relative;
            z-index: 1;
        }

        .especialidad-item p {
            font-size: 1.05rem;
            line-height: 1.9;
            color: #666;
            margin-bottom: 2.5rem;
            position: relative;
            z-index: 1;
        }

        .especialidad-list {
            list-style: none;
            padding-left: 0;
            position: relative;
            z-index: 1;
        }

        .especialidad-list li {
            padding: 1rem 0;
            color: var(--charcoal);
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            font-size: 0.95rem;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .especialidad-list li:last-child {
            border-bottom: none;
        }

        .especialidad-list li::before {
            content: '‚Äî';
            color: var(--gold);
            font-weight: 300;
        }

        .filosofia {
            background: var(--charcoal);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .filosofia::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(30deg, rgba(212, 175, 55, 0.02) 12%, transparent 12.5%, transparent 87%, rgba(212, 175, 55, 0.02) 87.5%);
            background-size: 100px 170px;
        }

        .filosofia .section-title,
        .filosofia .section-label {
            color: var(--gold);
        }

        .filosofia .section-subtitle {
            color: var(--pearl);
        }

        .filosofia-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5rem;
            margin-top: 6rem;
            position: relative;
            z-index: 1;
        }

        .filosofia-card {
            text-align: center;
            opacity: 0;
            transform: scale(0.9);
        }

        .filosofia-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 2.5rem;
            border: 2px solid var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 300;
            color: var(--gold);
            position: relative;
        }

        .filosofia-icon::before {
            content: '';
            position: absolute;
            inset: -10px;
            border: 1px solid var(--gold);
            border-radius: 50%;
            opacity: 0.3;
        }

        .filosofia-card h3 {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            color: var(--gold);
            letter-spacing: 0.05em;
        }

        .filosofia-card p {
            font-size: 1.05rem;
            line-height: 1.9;
            color: var(--pearl);
            font-weight: 300;
        }

        .proceso {
            background: white;
        }

        .proceso-container {
            max-width: 1200px;
            margin: 6rem auto 0;
            position: relative;
        }

        .proceso-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(180deg, transparent, var(--gold), transparent);
            transform: translateX(-50%);
        }

        .proceso-step {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 5rem;
            margin-bottom: 8rem;
            align-items: center;
            opacity: 0;
            position: relative;
        }

        .proceso-step:nth-child(even) .proceso-content {
            grid-column: 1;
            grid-row: 1;
            text-align: right;
        }

        .proceso-step:nth-child(even) .proceso-empty {
            grid-column: 3;
        }

        .proceso-content {
            padding: 3rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            background: white;
            position: relative;
        }

        .proceso-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: var(--gold);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .proceso-step:hover .proceso-content::before {
            transform: scaleY(1);
        }

        .proceso-number-container {
            width: 100px;
            height: 100px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            position: relative;
            z-index: 2;
        }

        .proceso-number-container::before {
            content: '';
            position: absolute;
            inset: -15px;
            border: 1px solid var(--gold);
            border-radius: 50%;
            opacity: 0.2;
        }

        .proceso-number {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 300;
            color: var(--gold);
        }

        .proceso-content h3 {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            color: var(--charcoal);
            letter-spacing: 0.03em;
        }

        .proceso-content p {
            font-size: 1.05rem;
            line-height: 1.9;
            color: #666;
        }

        .proceso-empty {
            /* Espacio vac√≠o para mantener la estructura */
        }

        .equipo {
            background: linear-gradient(135deg, var(--midnight) 0%, var(--noir) 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .equipo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 50%, rgba(212, 175, 55, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 50%, rgba(30, 144, 255, 0.05) 0%, transparent 50%);
        }

        .equipo .section-title,
        .equipo .section-label {
            color: var(--gold);
        }

        .equipo .section-subtitle {
            color: var(--pearl);
        }

        .equipo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5rem;
            margin-top: 6rem;
            position: relative;
            z-index: 1;
        }

        .equipo-card {
            background: rgba(255, 255, 255, 0.02);
            padding: 5rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
        }

        .equipo-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), transparent);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .equipo-card:hover::before {
            transform: scaleX(1);
        }

        .equipo-card:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: var(--gold);
        }

        .equipo-initials {
            width: 120px;
            height: 120px;
            border: 2px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .equipo-initials::before,
        .equipo-initials::after {
            content: '';
            position: absolute;
            border: 1px solid var(--gold);
        }

        .equipo-initials::before {
            inset: -10px;
            opacity: 0.5;
        }

        .equipo-initials::after {
            inset: -20px;
            opacity: 0.2;
        }

        .equipo-initials span {
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            font-weight: 300;
            color: var(--gold);
            letter-spacing: 0.1em;
        }

        .equipo-card h3 {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            font-weight: 500;
            margin-bottom: 1rem;
            color: var(--gold);
            letter-spacing: 0.05em;
        }

        .equipo-titles {
            font-family: 'Italiana', serif;
            font-size: 0.9rem;
            letter-spacing: 0.3em;
            color: var(--pearl);
            margin-bottom: 0.8rem;
            text-transform: uppercase;
        }

        .equipo-specialty {
            font-style: italic;
            font-size: 1.1rem;
            color: var(--gold-light);
            margin-bottom: 2rem;
        }

        .equipo-card p {
            font-size: 1.05rem;
            line-height: 1.9;
            color: var(--pearl);
            font-weight: 300;
        }

        .testimonios {
            background: var(--cream);
        }

        .testimonios-container {
            max-width: 1200px;
            margin: 6rem auto 0;
        }

        .testimonio {
            background: white;
            padding: 5rem;
            margin-bottom: 4rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
            opacity: 0;
            transform: translateX(50px);
        }

        .testimonio::before {
            content: '"';
            position: absolute;
            top: 3rem;
            left: 3rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 12rem;
            color: rgba(212, 175, 55, 0.08);
            line-height: 1;
            z-index: 0;
        }

        .testimonio-content {
            position: relative;
            z-index: 1;
        }

        .testimonio-stars {
            color: var(--gold);
            font-size: 1.2rem;
            margin-bottom: 2.5rem;
            letter-spacing: 0.5rem;
        }

        .testimonio-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            font-style: italic;
            line-height: 1.9;
            color: var(--charcoal);
            margin-bottom: 3rem;
            font-weight: 300;
        }

        .testimonio-author {
            display: flex;
            align-items: center;
            gap: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(212, 175, 55, 0.2);
        }

        .author-initials {
            width: 70px;
            height: 70px;
            border: 1px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--gold);
            flex-shrink: 0;
        }

        .author-info h4 {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--charcoal);
            margin-bottom: 0.5rem;
        }

        .author-info p {
            font-size: 0.95rem;
            color: #666;
            font-style: italic;
        }

        .contacto {
            background: white;
        }

        .contacto-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8rem;
            margin-top: 6rem;
        }

        .contacto-info {
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }

        .info-item {
            border-left: 2px solid var(--gold);
            padding-left: 2.5rem;
            opacity: 0;
            transform: translateX(-30px);
        }

        .info-item h3 {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 1rem;
            color: var(--charcoal);
            letter-spacing: 0.05em;
        }

        .info-item p {
            font-size: 1.05rem;
            line-height: 1.9;
            color: #666;
        }

        .info-item .highlight {
            color: var(--gold);
            font-weight: 500;
        }

        .contacto-form {
            background: var(--cream);
            padding: 5rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            opacity: 0;
            transform: translateY(30px);
        }

        .form-group {
            margin-bottom: 2.5rem;
        }

        .form-group label {
            display: block;
            font-family: 'Crimson Pro', serif;
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--charcoal);
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1.2rem 1.5rem;
            border: 1px solid rgba(212, 175, 55, 0.3);
            background: white;
            font-family: 'Crimson Pro', serif;
            font-size: 1rem;
            transition: all 0.4s ease;
            color: var(--charcoal);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 180px;
            line-height: 1.8;
        }

        .submit-btn {
            width: 100%;
            padding: 1.8rem;
            background: var(--gold);
            color: var(--noir);
            border: 1px solid var(--gold);
            font-family: 'Crimson Pro', serif;
            font-size: 0.95rem;
            font-weight: 500;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.8s;
        }

        .submit-btn:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
            box-shadow: 0 15px 50px rgba(212, 175, 55, 0.3);
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        footer {
            background: var(--noir);
            color: var(--pearl);
            padding: 8rem 10% 4rem;
            position: relative;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10%;
            right: 10%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 6rem;
            max-width: 1800px;
            margin: 0 auto 6rem;
        }

        .footer-brand {
            max-width: 400px;
        }

        .footer-logo {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            font-weight: 600;
            color: var(--gold);
            letter-spacing: 0.3em;
            margin-bottom: 2rem;
        }

        .footer-tagline {
            font-family: 'Italiana', serif;
            font-size: 0.9rem;
            letter-spacing: 0.3em;
            color: var(--pearl);
            margin-bottom: 2rem;
            text-transform: uppercase;
        }

        .footer-description {
            font-size: 1rem;
            line-height: 1.9;
            color: var(--smoke);
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--gold);
            margin-bottom: 2rem;
            letter-spacing: 0.1em;
        }

        .footer-section a,
        .footer-section p {
            display: block;
            font-size: 0.95rem;
            color: var(--smoke);
            text-decoration: none;
            line-height: 2.5;
            transition: all 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--gold);
            padding-left: 10px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 4rem;
            border-top: 1px solid rgba(212, 175, 55, 0.15);
            color: var(--smoke);
            font-size: 0.9rem;
        }

        .footer-bottom p {
            margin-bottom: 1rem;
        }

        .scroll-top {
            position: fixed;
            bottom: 50px;
            right: 50px;
            width: 60px;
            height: 60px;
            border: 1px solid var(--gold);
            background: var(--noir);
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 999;
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            background: var(--gold);
            color: var(--noir);
            transform: translateY(-5px);
        }

        @media (max-width: 1200px) {
            .hero h1 {
                font-size: 5rem;
            }

            .section-title {
                font-size: 3.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid .stat-item:nth-child(2),
            .stats-grid .stat-item:last-child {
                border-right: none;
            }

            .especialidades-grid,
            .equipo-grid {
                grid-template-columns: 1fr;
            }

            .especialidad-item:nth-child(n) {
                border-right: none;
            }

            .filosofia-grid {
                grid-template-columns: 1fr;
                gap: 4rem;
            }

            .footer-grid {
                grid-template-columns: 1fr 1fr;
                gap: 4rem;
            }

            .footer-brand {
                grid-column: 1 / -1;
                max-width: 100%;
            }

            .chapter-nav {
                display: none;
            }

            .transition-number {
                font-size: 8rem;
            }

            .transition-title {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 768px) {
            nav {
                padding: 2rem 5%;
            }

            .nav-links {
                position: fixed;
                right: -100%;
                top: 90px;
                flex-direction: column;
                background: rgba(13, 13, 13, 0.98);
                width: 100%;
                padding: 3rem 0;
                gap: 2rem;
                transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
                border-top: 1px solid var(--gold);
            }

            .nav-links.active {
                right: 0;
            }

            section {
                padding: 6rem 5%;
            }

            .hero h1 {
                font-size: 3rem;
            }

            .hero .tagline {
                font-size: 1.6rem;
            }

            .section-title {
                font-size: 2.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid .stat-item {
                border-right: none;
                border-bottom: 1px solid rgba(212, 175, 55, 0.15);
            }

            .stats-grid .stat-item:last-child {
                border-bottom: none;
            }

            .proceso-step {
                grid-template-columns: auto 1fr;
                gap: 2rem;
            }

            .proceso-step .proceso-empty,
            .proceso-step:nth-child(even) .proceso-empty {
                display: none;
            }

            .proceso-step .proceso-content,
            .proceso-step:nth-child(even) .proceso-content {
                grid-column: 2;
                text-align: left;
            }

            .proceso-line {
                left: 50px;
            }

            .contacto-grid {
                grid-template-columns: 1fr;
                gap: 4rem;
            }

            .footer-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Story Progress Bar -->
    <div class="story-progress"></div>

    <!-- Chapter Navigation -->
    <div class="chapter-nav">
        <div class="chapter-dot" data-chapter="Inicio"></div>
        <div class="chapter-dot" data-chapter="Logros"></div>
        <div class="chapter-dot" data-chapter="Experiencia"></div>
        <div class="chapter-dot" data-chapter="Filosof√≠a"></div>
        <div class="chapter-dot" data-chapter="Proceso"></div>
        <div class="chapter-dot" data-chapter="Equipo"></div>
        <div class="chapter-dot" data-chapter="Testimonios"></div>
        <div class="chapter-dot" data-chapter="Contacto"></div>
    </div>

    <!-- Scroll to top -->
    <div class="scroll-top" onclick="scrollToTop()">‚Üë</div>

    <!-- Header -->
    <header>
        <nav>
            <div class="logo">
                <div class="logo-main">RED PERICIAL</div>
                <div class="logo-separator"></div>
                <div class="logo-subtitle">Asesor√≠as especializadas</div>
            </div>
            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#expertise">Expertise</a></li>
                <li><a href="#proceso">Proceso</a></li>
                <li><a href="#equipo">Equipo</a></li>
                <li><a href="#testimonios">Testimonios</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero -->
    <section class="hero" id="inicio">
        <canvas id="canvas-3d"></canvas>
        <div class="hero-content">
            <div class="hero-ornament"></div>
            <div class="hero-label">Asesor√≠as especializadas para instituciones y m√©dicos</div>
            <h1>
                Defensa M√©dica<br>
            </h1>
            <div class="hero-cta">
                <a href="#contacto" class="btn-primary">Contacto</a>
                <a href="#expertise" class="btn-secondary">Nuestros servicios</a>
            </div>
        </div>
    </section>

    <!-- Transition 1 -->
    <div class="story-transition">
        <div class="transition-content">
            <div class="transition-number">01</div>
            <div class="transition-title">DOS DECADAS</div>
            <div class="transition-subtitle">De excelencia judicial</div>
        </div>
    </div>

    <!-- Stats -->
    <section class="stats-section">
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-number" data-target="500">0</span>
                <span class="stat-label">Casos ganados</span>
            </div>
            <div class="stat-item">
                <span class="stat-number"><span data-target="98">0</span>%</span>
                <span class="stat-label">Indicador de sucesos</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" data-target="23">0</span>
                <span class="stat-label">Nuestra experiencia</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">$<span data-target="500">0</span>M+</span>
                <span class="stat-label">Dinero recuperado</span>
            </div>
        </div>
    </section>

    <!-- Transition 2 -->
    <div class="story-transition">
        <div class="transition-content">
            <div class="transition-number">02</div>
            <div class="transition-title">ESPECIALIDADES</div>
            <div class="transition-subtitle">Defensa Legal Comprensiva</div>
        </div>
    </div>

    <!-- Especialidades -->
    <section class="especialidades" id="expertise">
        <div class="section-header">
            <div class="section-number">01</div>
            <div class="section-label">√Åreas de practica</div>
            <h2 class="section-title">Experiencia Especializada</h2>
            <p class="section-subtitle">
                Comprehensive legal defense across every dimension of medical practice
            </p>
        </div>
        <div class="section-divider"></div>
        <div class="especialidades-grid">
            <div class="especialidad-item">
                <span class="especialidad-number">01</span>
                <div class="especialidad-icon"></div>
                <h3>Medical Malpractice Defense</h3>
                <p>Elite representation in high-stakes negligence claims. Our attorneys possess medical degrees, enabling defense strategies that opposing counsel cannot replicate.</p>
                <ul class="especialidad-list">
                    <li>Complex surgical outcomes</li>
                    <li>Diagnostic dispute resolution</li>
                    <li>Multi-million dollar litigation</li>
                    <li>Expert witness coordination</li>
                </ul>
            </div>
            <div class="especialidad-item">
                <span class="especialidad-number">02</span>
                <div class="especialidad-icon"></div>
                <h3>Licensing & Board Defense</h3>
                <p>Protecting medical licenses before state boards and specialty councils with unmatched institutional knowledge and political acumen.</p>
                <ul class="especialidad-list">
                    <li>Board complaint representation</li>
                    <li>License preservation strategies</li>
                    <li>Administrative appeals</li>
                    <li>Credential protection</li>
                </ul>
            </div>
            <div class="especialidad-item">
                <span class="especialidad-number">03</span>
                <div class="especialidad-icon">üè•</div>
                <h3>Healthcare Transactions</h3>
                <p>Strategic counsel for practice acquisitions, partnerships, and complex healthcare business formations valued in the millions.</p>
                <ul class="especialidad-list">
                    <li>Practice mergers & acquisitions</li>
                    <li>Partnership agreements</li>
                    <li>Contract negotiation</li>
                    <li>Valuation advisory</li>
                </ul>
            </div>
            <div class="especialidad-item">
                <span class="especialidad-number">04</span>
                <div class="especialidad-icon">üë§</div>
                <h3>Executive Employment</h3>
                <p>Sophisticated representation in physician employment disputes involving executive compensation, non-competes, and wrongful termination.</p>
                <ul class="especialidad-list">
                    <li>Executive separations</li>
                    <li>Restrictive covenant litigation</li>
                    <li>Compensation disputes</li>
                    <li>Hospital privileges</li>
                </ul>
            </div>
            <div class="especialidad-item">
                <span class="especialidad-number">05</span>
                <div class="especialidad-icon">üîê</div>
                <h3>Privacy & Compliance</h3>
                <p>Proactive defense against federal investigations, HIPAA violations, and regulatory compliance matters with significant penalties.</p>
                <ul class="especialidad-list">
                    <li>Federal investigations</li>
                    <li>HIPAA breach defense</li>
                    <li>Compliance program design</li>
                    <li>Government audits</li>
                </ul>
            </div>
            <div class="especialidad-item">
                <span class="especialidad-number">06</span>
                <div class="especialidad-icon">‚ö°</div>
                <h3>Crisis Management</h3>
                <p>Immediate response team available around the clock for legal emergencies requiring instant strategic intervention and damage control.</p>
                <ul class="especialidad-list">
                    <li>24/7 emergency hotline</li>
                    <li>Immediate injunctive relief</li>
                    <li>Media crisis management</li>
                    <li>Reputation protection</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Transition 3 -->
    <div class="story-transition">
        <div class="transition-content">
            <div class="transition-number">03</div>
            <div class="transition-title">FILOSOFIA</div>
            <div class="transition-subtitle">Los tres pilares de la excelencia</div>
        </div>
    </div>

    <!-- Filosof√≠a -->
    <section class="filosofia">
        <div class="section-header">
            <div class="section-number">02</div>
            <div class="section-label">Nuestra Filosof√≠a</div>
            <h2 class="section-title">La diferencia en Red Pericial</h2>
            <p class="section-subtitle">
                Los tres pilares que definen la excelencia en la defensa m√©dica
            </p>
        </div>
        <div class="section-divider"></div>
        <div class="filosofia-grid">
            <div class="filosofia-card">
                <div class="filosofia-icon">I</div>
                <h3>Medical Fluency</h3>
                <p>Our founding partners are both physicians and attorneys. We speak medicine as our native language, providing insights that traditional legal firms cannot access. This dual expertise transforms complex medical concepts into compelling legal arguments.</p>
            </div>
            <div class="filosofia-card">
                <div class="filosofia-icon">II</div>
                <h3>Strategic Discretion</h3>
                <p>Your reputation is your legacy. Every engagement operates under absolute confidentiality protocols exceeding attorney-client privilege. We understand that discretion isn't optional‚Äîit's essential to preserving distinguished medical careers.</p>
            </div>
            <div class="filosofia-card">
                <div class="filosofia-icon">III</div>
                <h3>Relentless Excellence</h3>
                <p>We accept only cases where we can deliver exceptional outcomes. Our 98% success rate isn't coincidence‚Äîit's the result of meticulous case selection, exhaustive preparation, and strategic brilliance refined over 5,000+ cases.</p>
            </div>
        </div>
    </section>

    <!-- Transition 4 -->
    <div class="story-transition">
        <div class="transition-content">
            <div class="transition-number">04</div>
            <div class="transition-title">METODOLOG√çA</div>
            <div class="transition-subtitle">Procesos de defensa sistematizada</div>
        </div>
    </div>

    <!-- Proceso -->
    <section class="proceso" id="proceso">
        <div class="section-header">
            <div class="section-number">03</div>
            <div class="section-label">Metodolog√≠a</div>
            <h2 class="section-title">Nuestros procesos</h2>
            <p class="section-subtitle">
                A systematized approach to defending medical excellence
            </p>
        </div>
        <div class="section-divider"></div>
        <div class="proceso-container">
            <div class="proceso-line"></div>
            <div class="proceso-step">
                <div class="proceso-content">
                    <h3>Confidential Consultation</h3>
                    <p>Private consultation with a senior partner within 24 hours. Comprehensive case evaluation, risk assessment, and preliminary strategy development. All communications protected by attorney-client privilege from the first contact.</p>
                </div>
                <div class="proceso-number-container">
                    <div class="proceso-number">I</div>
                </div>
                <div class="proceso-empty"></div>
            </div>
            <div class="proceso-step">
                <div class="proceso-empty"></div>
                <div class="proceso-number-container">
                    <div class="proceso-number">II</div>
                </div>
                <div class="proceso-content">
                    <h3>Medical-Legal Analysis</h3>
                    <p>Exhaustive review by our physician-attorneys. Expert witness identification and coordination. Detailed timeline reconstruction and medical record analysis using proprietary forensic methodologies.</p>
                </div>
            </div>
            <div class="proceso-step">
                <div class="proceso-content">
                    <h3>Strategic Design</h3>
                    <p>Custom defense strategy crafted for your specific circumstances. Multi-dimensional approach considering legal, medical, reputational, and financial implications. War-gaming of all potential scenarios and contingencies.</p>
                </div>
                <div class="proceso-number-container">
                    <div class="proceso-number">III</div>
                </div>
                <div class="proceso-empty"></div>
            </div>
            <div class="proceso-step">
                <div class="proceso-empty"></div>
                <div class="proceso-number-container">
                    <div class="proceso-number">IV</div>
                </div>
                <div class="proceso-content">
                    <h3>Elite Execution</h3>
                    <p>Aggressive negotiation or masterful litigation as circumstances demand. Direct partner involvement throughout. Access to the nation's most respected medical expert witnesses and trial consultants.</p>
                </div>
            </div>
            <div class="proceso-step">
                <div class="proceso-content">
                    <h3>Ongoing Protection</h3>
                    <p>Post-resolution advisory to prevent future legal exposure. Reputation management and professional guidance. Proactive risk assessment and continuing legal partnership for your practice's evolution.</p>
                </div>
                <div class="proceso-number-container">
                    <div class="proceso-number">V</div>
                </div>
                <div class="proceso-empty"></div>
            </div>
        </div>
    </section>

    <!-- Transition 5 -->
    <div class="story-transition">
        <div class="transition-content">
            <div class="transition-number">05</div>
            <div class="transition-title">LIDERAZGO</div>
            <div class="transition-subtitle">Physician-Attorney Excellence</div>
        </div>
    </div>

    <!-- Equipo -->
    <section class="equipo" id="equipo">
        <div class="section-header">
            <div class="section-number">04</div>
            <div class="section-label">Leadership</div>
            <h2 class="section-title">Fundadores CEO</h2>
            <p class="section-subtitle">
                Physician-attorneys with unparalleled credentials and courtroom mastery
            </p>
        </div>
        <div class="section-divider"></div>
        <div class="equipo-grid">
            <div class="equipo-card">
                <div class="equipo-initials">
                    <span>RJ</span>
                </div>
                <h3>Roberto Jim√©nez</h3>
                <div class="equipo-titles">MD, JD ‚Ä¢ Founding Partner</div>
                <p class="equipo-specialty">Harvard Medical School ‚Ä¢ Yale Law School</p>
                <p>Former cardiovascular surgeon turned legal strategist. 28 years defending physicians in career-defining cases. Recognized as one of America's top 100 trial lawyers for healthcare litigation. Successfully defended $500M+ in malpractice claims.</p>
            </div>
            <div class="equipo-card">
                <div class="equipo-initials">
                    <span>SS</span>
                </div>
                <h3>Santiago Sterling</h3>
                <div class="equipo-titles">JD, LLM ‚Ä¢ Senior Partner</div>
                <p class="equipo-specialty">Stanford Law ‚Ä¢ Former FDA General Counsel</p>
                <p>National authority on healthcare regulation and licensing defense. Former General Counsel of the FDA with unmatched regulatory insights. Perfect track record in state medical board proceedings over 15 years. Advisor to three state governors on healthcare policy.</p>
            </div>
            <div class="equipo-card">
                <div class="equipo-initials">
                    <span>AT</span>
                </div>
                <h3>Alejandro Torres</h3>
                <div class="equipo-titles">JD ‚Ä¢ Managing Partner, Litigation</div>
                <p class="equipo-specialty">Columbia Law ‚Ä¢ Board Certified Trial Specialist</p>
                <p>Legendary courtroom presence with 97% trial success rate. Specializes in high-exposure malpractice defense and complex medical litigation. Lead counsel in 12 cases featured in national legal journals. Frequent lecturer at major medical conferences on liability reduction.</p>
            </div>
            <div class="equipo-card">
                <div class="equipo-initials">
                    <span>CR</span>
                </div>
                <h3>Carmen Ruiz</h3>
                <div class="equipo-titles">JD, MBA ‚Ä¢ Partner, Transactions</div>
                <p class="equipo-specialty">Penn Law ‚Ä¢ Wharton MBA</p>
                <p>Elite healthcare transactional attorney with $2B+ in successfully structured deals. Represents physician groups in complex mergers, acquisitions, and partnership formations. Strategic advisor to 50+ multi-specialty medical practices nationwide.</p>
            </div>
        </div>
    </section>

    <!-- Transition 6 -->
    <div class="story-transition">
        <div class="transition-content">
            <div class="transition-number">06</div>
            <div class="transition-title">TESTIMONIOS</div>
            <div class="transition-subtitle">En sus propias palabras</div>
        </div>
    </div>

    <!-- Testimonios -->
    <section class="testimonios" id="testimonios">
        <div class="section-header">
            <div class="section-number">05</div>
            <div class="section-label">Voces de nuestros clientes</div>
            <h2 class="section-title">Testimonios</h2>
            <p class="section-subtitle">
                En la voz de quienes han sido defendidos
            </p>
        </div>
        <div class="section-divider"></div>
        <div class="testimonios-container">
            <div class="testimonio">
                <div class="testimonio-content">
                    <div class="testimonio-stars">‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ</div>
                    <p class="testimonio-text">
                        I faced a $22 million malpractice claim that could have ended my 30-year surgical career. Dr. Morales didn't just win‚Äîhe achieved complete dismissal with prejudice. His medical knowledge combined with legal acumen created a defense strategy that opposing counsel couldn't penetrate. MediLex isn't just a law firm; they're guardian angels for physicians.
                    </p>
                    <div class="testimonio-author">
                        <div class="author-initials">CM</div>
                        <div class="author-info">
                            <h4>Dr. Carlos Mendoza</h4>
                            <p>Cardiovascular Surgeon, Chief of Surgery</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonio">
                <div class="testimonio-content">
                    <div class="testimonio-stars">‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ</div>
                    <p class="testimonio-text">
                        The state medical board investigation threatened everything I'd built. Patricia Vega's institutional knowledge and strategic brilliance were breathtaking. Not only did I retain my license‚Äîthere were no restrictions, no probation, nothing on my record. She navigated political waters I didn't even know existed. Worth every penny and infinitely more.
                    </p>
                    <div class="testimonio-author">
                        <div class="author-initials">MR</div>
                        <div class="author-info">
                            <h4>Dra. Mar√≠a Rodr√≠guez</h4>
                            <p>Maternal-Fetal Medicine Specialist</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonio">
                <div class="testimonio-content">
                    <div class="testimonio-stars">‚òÖ ‚òÖ ‚òÖ ‚òÖ ‚òÖ</div>
                    <p class="testimonio-text">
                        Selling our multi-physician practice was the most important financial transaction of our careers. Carmen Ruiz structured a deal that exceeded our expectations by 40% and included protections we never would have conceived. Her business acumen is matched only by her integrity. She's now our permanent advisor‚Äîan investment that continues paying dividends.
                    </p>
                    <div class="testimonio-author">
                        <div class="author-initials">JR</div>
                        <div class="author-info">
                            <h4>Dr. Santiago Sterling</h4>
                            <p>Anesthesiology Group, Managing Partner</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto -->
    <section class="contacto" id="contacto">
        <div class="section-header">
            <div class="section-number">06</div>
            <div class="section-label">Inicia Tu Defensa</div>
            <h2 class="section-title">Contacto</h2>
            <p class="section-subtitle">
                Consulta confidencial con un abogado senior las 24 horas
            </p>
        </div>
        <div class="section-divider"></div>
        <div class="contacto-grid">
            <div class="contacto-info">
                <div class="info-item">
                    <h3>Oficina principal</h3>
                    <p>
                        Red Pericial Executive Tower<br>
                        Penthouse Level 45<br>
                        1000 Corporate Plaza<br>
                        Cali, Valle del Cauca<br>
                        Colombia
                    </p>
                </div>
                <div class="info-item">
                    <h3>Direct Contact</h3>
                    <p>
                        Partner Line: <span class="highlight">+57 (2) 999-8888</span><br>
                        24/7 Emergency: <span class="highlight">+57 (310) 500-0000</span><br>
                        Secure WhatsApp: +57 (310) 500-0001
                    </p>
                </div>
                <div class="info-item">
                    <h3>Email</h3>
                    <p>
                        Partners: <span class="highlight">counsel@medilex.law</span><br>
                        Urgent Matters: emergency@medilex.law<br>
                        General: contact@medilex.law
                    </p>
                </div>
                <div class="info-item">
                    <h3>Availability</h3>
                    <p>
                        Monday ‚Äì Friday: 7:00 AM ‚Äì 9:00 PM<br>
                        Saturday: 8:00 AM ‚Äì 4:00 PM<br>
                        <span class="highlight">Emergency Line: 24/7/365</span>
                    </p>
                </div>
            </div>
            <form class="contacto-form" onsubmit="handleSubmit(event)">
                <div class="form-group">
                    <label>Nombre completo *</label>
                    <input type="text" name="nombre" required placeholder="Dr./Dra.">
                </div>
                <div class="form-group">
                    <label>Correo profesional *</label>
                    <input type="email" name="email" required placeholder="your.email@hospital.com">
                </div>
                <div class="form-group">
                    <label>Celular *</label>
                    <input type="tel" name="telefono" required placeholder="+57">
                </div>
                <div class="form-group">
                    <label>Especialidad *</label>
                    <select name="especialidad" required>
                        <option value="">Select Specialty</option>
                        <option value="surgery">Surgery</option>
                        <option value="cardiology">Cardiology</option>
                        <option value="neurosurgery">Neurosurgery</option>
                        <option value="internal">Internal Medicine</option>
                        <option value="pediatrics">Pediatrics</option>
                        <option value="obgyn">OB/GYN</option>
                        <option value="anesthesiology">Anesthesiology</option>
                        <option value="radiology">Radiology</option>
                        <option value="oncology">Oncology</option>
                        <option value="psychiatry">Psychiatry</option>
                        <option value="other">Other Specialty</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Importancia de la naturaleza legal *</label>
                    <select name="tipo" required>
                        <option value="">Seleccione un tipo</option>
                        <option value="malpractice">Malpractice Claim</option>
                        <option value="board">Medical Board Issue</option>
                        <option value="employment">Employment Dispute</option>
                        <option value="transaction">Practice Transaction</option>
                        <option value="compliance">Regulatory/Compliance</option>
                        <option value="emergency">Emergency Situation</option>
                        <option value="other">Other Matter</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Resumen confidencial del caso *</label>
                    <textarea name="mensaje" required placeholder="All communications are protected by attorney-client privilege from the moment of first contact."></textarea>
                </div>
                <button type="submit" class="submit-btn">Requerir consulta confidencial</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="footer-logo">Red Pericial</div>
                <div class="footer-tagline">Consejo elite de defensa m√©dica</div>
                <p class="footer-description">
                    Established 2003. For over two decades, MediLex has represented the medical profession's most distinguished practitioners in their most consequential legal matters. Our physician-attorneys bring unparalleled medical fluency to legal defense.
                </p>
                <p style="color: var(--gold); margin-top: 2rem;">
                    Best Medical Defense Firm ‚Äî National Law Journal 2020-2026
                </p>
            </div>
            <div class="footer-section">
                <h4>Practice Areas</h4>
                <a href="#expertise">Malpractice Defense</a>
                <a href="#expertise">Medical Licensing</a>
                <a href="#expertise">Healthcare Transactions</a>
                <a href="#expertise">Employment Law</a>
                <a href="#expertise">Regulatory Compliance</a>
                <a href="#expertise">Crisis Management</a>
            </div>
            <div class="footer-section">
                <h4>Resources</h4>
                <a href="#">Legal Publications</a>
                <a href="#">Case Studies</a>
                <a href="#">Physician Resources</a>
                <a href="#">CME Programs</a>
                <a href="#">Risk Management</a>
                <a href="#">Legal Alerts</a>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p>Partners: +57 (2) 999-8888</p>
                <p>Emergency: +57 (310) 500-0000</p>
                <p>counsel@medilex.law</p>
                <p style="margin-top: 1.5rem; color: var(--gold);">24/7 Emergency Hotline Available</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Red pericial. Todos los derechos reservados.</p>
            <p>Miembros: American Health Lawyers Association | Board Certified Medical Trial Specialists</p>
        </div>
    </footer>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    
    <script>
       // ============================================
// THREE.JS - PROFESSIONAL LIGHTHOUSE 3D SCENE
// ============================================
let scene, camera, renderer, objects = [];
let lighthouse, lightBeam, oceanWaves;

function initThree() {
    const canvas = document.getElementById('canvas-3d');
    scene = new THREE.Scene();
    scene.fog = new THREE.Fog(0x0d1b2a, 20, 80);
    
    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(15, 8, 20);
    camera.lookAt(0, 5, 0);
    
    renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x0d1b2a, 1);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    
    // Iluminaci√≥n nocturna profesional
    const ambientLight = new THREE.AmbientLight(0x1a2847, 0.4);
    scene.add(ambientLight);
    
    const moonLight = new THREE.DirectionalLight(0x9cb4d8, 0.6);
    moonLight.position.set(20, 30, 15);
    moonLight.castShadow = true;
    moonLight.shadow.mapSize.width = 2048;
    moonLight.shadow.mapSize.height = 2048;
    scene.add(moonLight);
    
    // Luz de relleno
    const fillLight = new THREE.DirectionalLight(0x4a5f7f, 0.2);
    fillLight.position.set(-10, 10, -10);
    scene.add(fillLight);
    
    // Crear escena del faro
    createLighthouse();
    createLightBeam();
    createOcean();
    createRocks();
    createStars();
    createMoon();
    createBirds();
    createClouds();
    createIsland();
    
    animate();
}

// Isla base del faro
function createIsland() {
    const islandMat = new THREE.MeshPhongMaterial({ 
        color: 0x2d3a2e,
        shininess: 5
    });
    
    const island = new THREE.Mesh(
        new THREE.CylinderGeometry(8, 10, 2, 32),
        islandMat
    );
    island.position.y = -1;
    island.receiveShadow = true;
    scene.add(island);
    
    // Vegetaci√≥n dispersa
    for(let i = 0; i < 30; i++) {
        const grass = new THREE.Mesh(
            new THREE.ConeGeometry(0.1, 0.3, 4),
            new THREE.MeshPhongMaterial({ color: 0x3a5a40 })
        );
        
        const angle = Math.random() * Math.PI * 2;
        const distance = 4 + Math.random() * 3;
        
        grass.position.set(
            Math.cos(angle) * distance,
            0.15,
            Math.sin(angle) * distance
        );
        grass.rotation.y = Math.random() * Math.PI * 2;
        scene.add(grass);
    }
}

// Estructura del faro mejorada
function createLighthouse() {
    const group = new THREE.Group();
    
    // Base de piedra robusta
    const baseMat = new THREE.MeshPhongMaterial({ 
        color: 0x5a5a5a,
        shininess: 20,
        specular: 0x222222
    });
    
    const base = new THREE.Mesh(
        new THREE.CylinderGeometry(2.5, 3, 2, 16),
        baseMat
    );
    base.position.y = 1;
    base.castShadow = true;
    base.receiveShadow = true;
    group.add(base);
    
    // Puerta
    const doorMat = new THREE.MeshPhongMaterial({ 
        color: 0x2a1810,
        shininess: 30
    });
    const door = new THREE.Mesh(
        new THREE.BoxGeometry(0.8, 1.5, 0.1),
        doorMat
    );
    door.position.set(0, 1.5, 2.45);
    group.add(door);
    
    // Manija dorada
    const handle = new THREE.Mesh(
        new THREE.SphereGeometry(0.08, 16, 16),
        new THREE.MeshPhongMaterial({ 
            color: 0xd4af37,
            shininess: 300,
            metalness: 0.8
        })
    );
    handle.position.set(0.3, 1.5, 2.5);
    group.add(handle);
    
    // Torre principal (franjas rojas y blancas)
    const segments = 6;
    const segmentHeight = 2;
    
    for(let i = 0; i < segments; i++) {
        const isRed = i % 2 === 0;
        const mat = new THREE.MeshPhongMaterial({ 
            color: isRed ? 0xd62828 : 0xf8f9fa,
            shininess: 80,
            specular: isRed ? 0x440000 : 0xffffff
        });
        
        const radiusTop = 2 - (i * 0.08);
        const radiusBottom = 2 - ((i - 1) * 0.08);
        
        const segment = new THREE.Mesh(
            new THREE.CylinderGeometry(radiusTop, radiusBottom, segmentHeight, 24),
            mat
        );
        segment.position.y = 2 + (i * segmentHeight) + segmentHeight / 2;
        segment.castShadow = true;
        segment.receiveShadow = true;
        group.add(segment);
    }
    
    // Balc√≥n intermedio
    const balcony = new THREE.Mesh(
        new THREE.CylinderGeometry(2.3, 2.3, 0.3, 24),
        new THREE.MeshPhongMaterial({ 
            color: 0x1a1a1a,
            shininess: 100
        })
    );
    balcony.position.y = 8;
    group.add(balcony);
    
    // Barandilla
    const railingGeometry = new THREE.TorusGeometry(2.2, 0.05, 8, 48);
    const railing = new THREE.Mesh(
        railingGeometry,
        new THREE.MeshPhongMaterial({ 
            color: 0x333333,
            shininess: 200
        })
    );
    railing.position.y = 8.4;
    railing.rotation.x = Math.PI / 2;
    group.add(railing);
    
    // Sala de la linterna
    const lanternHeight = 2.5;
    const lanternRoom = new THREE.Mesh(
        new THREE.CylinderGeometry(2, 2, lanternHeight, 16),
        new THREE.MeshPhongMaterial({ 
            color: 0x1a1a1a,
            shininess: 120,
            specular: 0x444444
        })
    );
    lanternRoom.position.y = 14 + lanternHeight / 2;
    lanternRoom.castShadow = true;
    group.add(lanternRoom);
    
    // Ventanas de cristal iluminadas (8 ventanas)
    const glassMat = new THREE.MeshPhongMaterial({ 
        color: 0xfff4d6,
        transparent: true,
        opacity: 0.85,
        emissive: 0xffdd66,
        emissiveIntensity: 0.8,
        side: THREE.DoubleSide
    });
    
    for(let i = 0; i < 8; i++) {
        const angle = (i / 8) * Math.PI * 2;
        const windowFrame = new THREE.Mesh(
            new THREE.BoxGeometry(0.6, 1.5, 0.15),
            glassMat
        );
        windowFrame.position.set(
            Math.cos(angle) * 1.95,
            14 + lanternHeight / 2,
            Math.sin(angle) * 1.95
        );
        windowFrame.lookAt(0, 14 + lanternHeight / 2, 0);
        group.add(windowFrame);
        
        // Marco de ventana
        const frameMat = new THREE.MeshPhongMaterial({ 
            color: 0x2a2a2a,
            shininess: 100
        });
        
        const frameVertical1 = new THREE.Mesh(
            new THREE.BoxGeometry(0.08, 1.6, 0.08),
            frameMat
        );
        frameVertical1.position.copy(windowFrame.position);
        frameVertical1.position.x += Math.cos(angle) * 0.05;
        frameVertical1.position.z += Math.sin(angle) * 0.05;
        frameVertical1.position.x += Math.cos(angle + Math.PI / 2) * 0.25;
        frameVertical1.position.z += Math.sin(angle + Math.PI / 2) * 0.25;
        group.add(frameVertical1);
        
        const frameVertical2 = new THREE.Mesh(
            new THREE.BoxGeometry(0.08, 1.6, 0.08),
            frameMat
        );
        frameVertical2.position.copy(windowFrame.position);
        frameVertical2.position.x += Math.cos(angle) * 0.05;
        frameVertical2.position.z += Math.sin(angle) * 0.05;
        frameVertical2.position.x -= Math.cos(angle + Math.PI / 2) * 0.25;
        frameVertical2.position.z -= Math.sin(angle + Math.PI / 2) * 0.25;
        group.add(frameVertical2);
    }
    
    // Techo superior (estructura met√°lica)
    const roofBase = new THREE.Mesh(
        new THREE.CylinderGeometry(2.1, 2.1, 0.2, 16),
        new THREE.MeshPhongMaterial({ 
            color: 0x1a1a1a,
            shininess: 150
        })
    );
    roofBase.position.y = 15.6;
    group.add(roofBase);
    
    // C√∫pula del techo
    const roof = new THREE.Mesh(
        new THREE.ConeGeometry(2.2, 2.5, 16),
        new THREE.MeshPhongMaterial({ 
            color: 0xa52a2a,
            shininess: 100,
            specular: 0x551515
        })
    );
    roof.position.y = 16.85;
    roof.castShadow = true;
    group.add(roof);
    
    // Punta dorada con detalles
    const tipBase = new THREE.Mesh(
        new THREE.CylinderGeometry(0.15, 0.2, 0.4, 16),
        new THREE.MeshPhongMaterial({ 
            color: 0xb8860b,
            shininess: 300,
            metalness: 0.9
        })
    );
    tipBase.position.y = 18.3;
    group.add(tipBase);
    
    const tip = new THREE.Mesh(
        new THREE.SphereGeometry(0.3, 16, 16),
        new THREE.MeshPhongMaterial({ 
            color: 0xffd700,
            shininess: 300,
            emissive: 0xffaa00,
            emissiveIntensity: 0.3,
            metalness: 1
        })
    );
    tip.position.y = 18.7;
    group.add(tip);
    
    // Veleta decorativa
    const vane = new THREE.Mesh(
        new THREE.ConeGeometry(0.05, 0.5, 4),
        new THREE.MeshPhongMaterial({ 
            color: 0xffd700,
            shininess: 300
        })
    );
    vane.position.y = 19.2;
    vane.rotation.z = Math.PI / 2;
    group.add(vane);
    
    group.scale.set(0.5, 0.5, 0.5);  // Reduce el faro al 50%
    group.position.y = 0;
    scene.add(group);
    lighthouse = group;
    objects.push({ obj: tip, speed: 0.02, axis: 'y' });
}

// Haz de luz profesional rotatorio
function createLightBeam() {
    const group = new THREE.Group();
    
    // Luz principal tipo faro
    const spotLight = new THREE.SpotLight(0xfff9e6, 25, 60, Math.PI / 7, 0.3, 1);
    spotLight.position.set(0, 15.25, 0);
    spotLight.castShadow = true;
    spotLight.shadow.mapSize.width = 1024;
    spotLight.shadow.mapSize.height = 1024;
    scene.add(spotLight);
    
    const target = new THREE.Object3D();
    target.position.set(0, 0, 20);
    scene.add(target);
    spotLight.target = target;
    
    group.add(spotLight);
    group.add(target);
    
    // Haz visible principal
    const beamGeometry = new THREE.CylinderGeometry(0.2, 4.5, 35, 16, 1, true);
    const beamMat = new THREE.MeshBasicMaterial({ 
        color: 0xffffcc,
        transparent: true,
        opacity: 0.2,
        side: THREE.DoubleSide,
        blending: THREE.AdditiveBlending
    });
    const beamMesh = new THREE.Mesh(beamGeometry, beamMat);
    beamMesh.position.set(0, 15.25, 17.5);
    beamMesh.rotation.x = Math.PI / 2;
    group.add(beamMesh);
    
    // Halos conc√©ntricos para efecto volum√©trico
    for(let i = 0; i < 4; i++) {
        const haloRadius = 5 + (i * 1.5);
        const halo = new THREE.Mesh(
            new THREE.ConeGeometry(haloRadius, 30, 16, 1, true),
            new THREE.MeshBasicMaterial({ 
                color: 0xffff99,
                transparent: true,
                opacity: 0.06 - (i * 0.01),
                side: THREE.DoubleSide,
                blending: THREE.AdditiveBlending
            })
        );
        halo.position.set(0, 15.25, 15);
        halo.rotation.x = Math.PI;
        group.add(halo);
    }
    
    // Resplandor en el origen
    const glowGeometry = new THREE.SphereGeometry(0.8, 16, 16);
    const glowMat = new THREE.MeshBasicMaterial({ 
        color: 0xffff66,
        transparent: true,
        opacity: 0.6,
        blending: THREE.AdditiveBlending
    });
    const glow = new THREE.Mesh(glowGeometry, glowMat);
    glow.position.set(0, 15.25, 0);
    group.add(glow);
    
    // Segundo haz m√°s tenue (barrido secundario)
    const secondBeam = new THREE.Mesh(
        new THREE.CylinderGeometry(0.15, 3, 30, 12, 1, true),
        new THREE.MeshBasicMaterial({ 
            color: 0xffffdd,
            transparent: true,
            opacity: 0.12,
            side: THREE.DoubleSide,
            blending: THREE.AdditiveBlending
        })
    );
    secondBeam.position.set(0, 15.25, 15);
    secondBeam.rotation.x = Math.PI / 2;
    secondBeam.rotation.y = Math.PI;
    group.add(secondBeam);
    
    group.position.y = 0;
    scene.add(group);
    lightBeam = group;
    objects.push({ obj: group, speed: 0.008, axis: 'y', lighthouse: true });
}

// Oc√©ano mejorado con mejor material
function createOcean() {
    const group = new THREE.Group();
    const oceanMat = new THREE.MeshPhongMaterial({ 
        color: 0x1a4a6b,
        shininess: 150,
        transparent: true,
        opacity: 0.9,
        specular: 0x6699bb,
        side: THREE.DoubleSide
    });
    
    // M√∫ltiples capas de agua
    for(let i = 0; i < 4; i++) {
        const ocean = new THREE.Mesh(
            new THREE.PlaneGeometry(100, 100, 64, 64),
            oceanMat.clone()
        );
        ocean.rotation.x = -Math.PI / 2;
        ocean.position.y = -0.2 - (i * 0.15);
        ocean.material.opacity = 0.9 - (i * 0.15);
        ocean.receiveShadow = true;
        group.add(ocean);
        
        objects.push({ obj: ocean, speed: 0.0008 * (i + 1), wave: true, wavePhase: i * Math.PI / 2 });
    }
    
    scene.add(group);
    oceanWaves = group;
}

// Rocas mejoradas
function createRocks() {
    const rockMat = new THREE.MeshPhongMaterial({ 
        color: 0x3a3a3a,
        shininess: 8,
        specular: 0x111111
    });
    
    for(let i = 0; i < 25; i++) {
        const size = 0.4 + Math.random() * 1.2;
        const rock = new THREE.Mesh(
            new THREE.DodecahedronGeometry(size, 0),
            rockMat
        );
        
        const angle = (i / 25) * Math.PI * 2 + Math.random() * 0.5;
        const distance = 5 + Math.random() * 8;
        
        rock.position.set(
            Math.cos(angle) * distance,
            -0.1 + Math.random() * 0.3,
            Math.sin(angle) * distance
        );
        
        rock.scale.set(
            1,
            0.5 + Math.random() * 0.5,
            1
        );
        
        rock.rotation.set(
            Math.random() * Math.PI,
            Math.random() * Math.PI,
            Math.random() * Math.PI
        );
        
        rock.castShadow = true;
        rock.receiveShadow = true;
        scene.add(rock);
    }
}

// Estrellas mejoradas
function createStars() {
    const geometry = new THREE.BufferGeometry();
    const count = 4000;
    const positions = new Float32Array(count * 3);
    const sizes = new Float32Array(count);
    
    for(let i = 0; i < count; i++) {
        const i3 = i * 3;
        positions[i3] = (Math.random() - 0.5) * 150;
        positions[i3 + 1] = Math.random() * 60 + 20;
        positions[i3 + 2] = (Math.random() - 0.5) * 150;
        sizes[i] = Math.random() * 2 + 0.5;
    }
    
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
    
    const material = new THREE.PointsMaterial({
        size: 0.15,
        color: 0xffffff,
        transparent: true,
        opacity: 0.9,
        blending: THREE.AdditiveBlending,
        sizeAttenuation: true
    });
    
    const stars = new THREE.Points(geometry, material);
    scene.add(stars);
    objects.push({ obj: stars, speed: 0.00008, axis: 'y', twinkle: true });
}

// Luna mejorada
function createMoon() {
    const moon = new THREE.Mesh(
        new THREE.SphereGeometry(3, 32, 32),
        new THREE.MeshPhongMaterial({ 
            color: 0xfff8dc,
            emissive: 0xffeed5,
            emissiveIntensity: 0.4,
            shininess: 60
        })
    );
    moon.position.set(25, 35, -30);
    scene.add(moon);
    
    // Cr√°teres
    for(let i = 0; i < 8; i++) {
        const crater = new THREE.Mesh(
            new THREE.SphereGeometry(0.3 + Math.random() * 0.4, 16, 16),
            new THREE.MeshPhongMaterial({ 
                color: 0xd4c5a9,
                emissive: 0xccb896,
                emissiveIntensity: 0.2
            })
        );
        crater.position.copy(moon.position);
        crater.position.x += (Math.random() - 0.5) * 2;
        crater.position.y += (Math.random() - 0.5) * 2;
        crater.position.z += Math.random() * 1;
        scene.add(crater);
    }
    
    // Halo lunar suave
    const halo = new THREE.Mesh(
        new THREE.SphereGeometry(4, 32, 32),
        new THREE.MeshBasicMaterial({ 
            color: 0xffffee,
            transparent: true,
            opacity: 0.08,
            blending: THREE.AdditiveBlending
        })
    );
    halo.position.copy(moon.position);
    scene.add(halo);
}

// Gaviotas mejoradas
function createBirds() {
    const group = new THREE.Group();
    
    for(let i = 0; i < 12; i++) {
        const bird = new THREE.Group();
        
        const wingMat = new THREE.MeshBasicMaterial({ 
            color: 0x2a2a2a,
            side: THREE.DoubleSide
        });
        
        // Cuerpo
        const body = new THREE.Mesh(
            new THREE.SphereGeometry(0.08, 8, 8),
            wingMat
        );
        body.scale.set(1.5, 1, 1);
        bird.add(body);
        
        // Alas con curva
        const wingShape = new THREE.Shape();
        wingShape.moveTo(0, 0);
        wingShape.quadraticCurveTo(0.3, 0.1, 0.5, 0);
        wingShape.lineTo(0.1, -0.05);
        wingShape.lineTo(0, 0);
        
        const wingGeometry = new THREE.ShapeGeometry(wingShape);
        
        const leftWing = new THREE.Mesh(wingGeometry, wingMat);
        leftWing.position.x = -0.05;
        leftWing.rotation.y = Math.PI;
        bird.add(leftWing);
        
        const rightWing = new THREE.Mesh(wingGeometry, wingMat);
        rightWing.position.x = 0.05;
        bird.add(rightWing);
        
        bird.position.set(
            (Math.random() - 0.5) * 40,
            10 + Math.random() * 8,
            (Math.random() - 0.5) * 40
        );
        
        bird.rotation.y = Math.random() * Math.PI * 2;
        
        group.add(bird);
        objects.push({ 
            obj: bird, 
            speed: 0.015 + Math.random() * 0.02, 
            bird: true, 
            phase: Math.random() * Math.PI * 2,
            circleRadius: 15 + Math.random() * 10
        });
    }
    
    scene.add(group);
}

// Nubes mejoradas
function createClouds() {
    const cloudMat = new THREE.MeshBasicMaterial({ 
        color: 0x4a5f7f,
        transparent: true,
        opacity: 0.5
    });
    
    for(let i = 0; i < 15; i++) {
        const cloud = new THREE.Group();
        
        // M√∫ltiples esferas para formar nube
        const puffCount = 6 + Math.floor(Math.random() * 4);
        for(let j = 0; j < puffCount; j++) {
            const puff = new THREE.Mesh(
                new THREE.SphereGeometry(1.2 + Math.random() * 0.8, 12, 12),
                cloudMat
            );
            puff.position.set(
                (Math.random() - 0.5) * 4,
                (Math.random() - 0.5) * 0.8,
                (Math.random() - 0.5) * 2.5
            );
            puff.scale.set(
                1 + Math.random() * 0.3,
                0.8 + Math.random() * 0.2,
                1 + Math.random() * 0.3
            );
            cloud.add(puff);
        }
        
        cloud.position.set(
            (Math.random() - 0.5) * 60,
            18 + Math.random() * 8,
            (Math.random() - 0.5) * 60
        );
        
        cloud.scale.setScalar(0.8 + Math.random() * 0.6);
        
        scene.add(cloud);
        objects.push({ 
            obj: cloud, 
            speed: 0.003 + Math.random() * 0.002, 
            axis: 'x', 
            drift: true,
            driftZ: (Math.random() - 0.5) * 0.001
        });
    }
}

// Animaci√≥n mejorada
function animate() {
    requestAnimationFrame(animate);
    
    const time = Date.now() * 0.001;
    
    objects.forEach(({ obj, speed, axis, wave, bird, phase, lighthouse, twinkle, drift, driftZ, circleRadius, wavePhase }) => {
        if(axis === 'y' && !lighthouse) {
            obj.rotation.y += speed;
        } else if(lighthouse) {
            // Rotaci√≥n del haz de luz
            obj.rotation.y += speed;
        } else if(axis === 'x' && drift) {
            obj.position.x += speed;
            if(driftZ) obj.position.z += driftZ;
            if(obj.position.x > 80) {
                obj.position.x = -80;
                obj.position.z = (Math.random() - 0.5) * 60;
            }
        }
        
        if(wave) {
            const vertices = obj.geometry.attributes.position;
            const originalPositions = obj.geometry.attributes.position.array;
            
            for(let i = 0; i < vertices.count; i++) {
                const x = vertices.getX(i);
                const z = vertices.getZ(i);
                
                const wave1 = Math.sin(x * 0.3 + time * 1.5 + (wavePhase || 0)) * 0.15;
                const wave2 = Math.cos(z * 0.25 + time * 1.2 + (wavePhase || 0)) * 0.12;
                const wave3 = Math.sin((x + z) * 0.15 + time * 0.8) * 0.08;
                
                const y = wave1 + wave2 + wave3;
                vertices.setY(i, y);
            }
            vertices.needsUpdate = true;
        }
        
        if(bird) {
            const radius = circleRadius || 20;
            const angle = time * speed * 0.1 + (phase || 0);
            
            obj.position.x = Math.cos(angle) * radius;
            obj.position.z = Math.sin(angle) * radius;
            obj.position.y += Math.sin(time * 2 + phase) * 0.008;
            
            // Orientar hacia la direcci√≥n de vuelo
            obj.rotation.y = angle + Math.PI / 2;
            obj.rotation.z = Math.sin(time * 3 + phase) * 0.1;
            
            // Animar alas
            obj.children.forEach((wing, idx) => {
                if(idx > 0) { // Skip body
                    wing.rotation.z = Math.sin(time * 6 + phase) * 0.5 * (idx === 1 ? -1 : 1);
                }
            });
        }
        
        if(twinkle) {
            // Efecto de parpadeo de estrellas
            const material = obj.material;
            material.opacity = 0.7 + Math.sin(time * 2 + phase) * 0.2;
        }
    });
    
    // Movimiento orbital suave de c√°mara
    const cameraAngle = time * 0.05;
    camera.position.x = Math.cos(cameraAngle) * 22;
    camera.position.z = Math.sin(cameraAngle) * 22;
    camera.position.y = 8 + Math.sin(time * 0.2) * 1;
    camera.lookAt(0, 6, 0);
    
    renderer.render(scene, camera);
}

window.addEventListener('load', initThree);
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
        // ============================================
        // GSAP STORYTELLING ANIMATIONS
        // ============================================
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
        
        // Progress Bar
        gsap.to('.story-progress', {
            width: '100%',
            ease: 'none',
            scrollTrigger: {
                trigger: 'body',
                start: 'top top',
                end: 'bottom bottom',
                scrub: 0.3
            }
        });
        
        // Chapter Navigation
        const chapters = [
            { element: '.hero', index: 0 },
            { element: '.stats-section', index: 1 },
            { element: '.especialidades', index: 2 },
            { element: '.filosofia', index: 3 },
            { element: '.proceso', index: 4 },
            { element: '.equipo', index: 5 },
            { element: '.testimonios', index: 6 },
            { element: '.contacto', index: 7 }
        ];
        
        chapters.forEach(chapter => {
            ScrollTrigger.create({
                trigger: chapter.element,
                start: 'top center',
                end: 'bottom center',
                onEnter: () => updateChapterNav(chapter.index),
                onEnterBack: () => updateChapterNav(chapter.index)
            });
        });
        
        function updateChapterNav(index) {
            document.querySelectorAll('.chapter-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }
        
        document.querySelectorAll('.chapter-dot').forEach((dot, i) => {
            dot.addEventListener('click', () => {
                const chapter = chapters[i];
                const target = document.querySelector(chapter.element);
                if(target) {
                    gsap.to(window, {
                        duration: 1.5,
                        scrollTo: { y: target, offsetY: 100 },
                        ease: 'power2.inOut'
                    });
                }
            });
        });
        
        // Hero Entrance
        const heroTimeline = gsap.timeline({ defaults: { ease: 'power3.out' } });
        heroTimeline
            .to('.hero-ornament', { opacity: 1, duration: 1, delay: 0.3 })
            .to('.hero-label', { opacity: 1, duration: 1 }, '-=0.7')
            .to('.hero h1', { opacity: 1, y: 0, duration: 1.2 }, '-=0.5')
            .to('.hero .tagline', { opacity: 1, y: 0, duration: 1 }, '-=0.8')
            .to('.hero .description', { opacity: 1, y: 0, duration: 1 }, '-=0.6')
            .to('.hero-cta', { opacity: 1, y: 0, duration: 1 }, '-=0.4');
        
        // Story Transitions
        gsap.utils.toArray('.story-transition').forEach((transition) => {
            const number = transition.querySelector('.transition-number');
            const title = transition.querySelector('.transition-title');
            const subtitle = transition.querySelector('.transition-subtitle');
            
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: transition,
                    start: 'top center',
                    end: 'bottom center',
                    scrub: 1
                }
            });
            
            tl.fromTo(transition, { opacity: 0 }, { opacity: 1, duration: 0.5 })
              .fromTo(number, { scale: 0.5, opacity: 0 }, { scale: 1, opacity: 0.1, duration: 1 }, 0.2)
              .fromTo(title, { y: 50, opacity: 0 }, { y: 0, opacity: 1, duration: 1 }, 0.4)
              .fromTo(subtitle, { y: 30, opacity: 0 }, { y: 0, opacity: 1, duration: 1 }, 0.6)
              .to(transition, { opacity: 0, duration: 0.5 }, 1.5);
        });
        
        // Stats con contadores
        gsap.utils.toArray('.stat-item').forEach((stat, i) => {
            gsap.to(stat, {
                opacity: 1,
                y: 0,
                duration: 1,
                delay: i * 0.15,
                scrollTrigger: {
                    trigger: stat,
                    start: 'top 85%',
                    onEnter: () => {
                        const num = stat.querySelector('[data-target]');
                        if(num) {
                            const target = parseInt(num.getAttribute('data-target'));
                            gsap.to({ val: 0 }, {
                                val: target,
                                duration: 2.5,
                                ease: 'power2.out',
                                onUpdate: function() {
                                    num.textContent = Math.floor(this.targets()[0].val);
                                }
                            });
                        }
                    }
                }
            });
        });
        
        // Secciones
        gsap.utils.toArray('.section-label').forEach(el => {
            gsap.to(el, {
                opacity: 1,
                y: 0,
                duration: 0.8,
                scrollTrigger: { trigger: el, start: 'top 90%' }
            });
        });
        
        gsap.utils.toArray('.section-title').forEach(el => {
            gsap.to(el, {
                opacity: 1,
                y: 0,
                duration: 1,
                scrollTrigger: { trigger: el, start: 'top 88%' }
            });
        });
        
        gsap.utils.toArray('.section-subtitle').forEach(el => {
            gsap.to(el, {
                opacity: 1,
                y: 0,
                duration: 1,
                scrollTrigger: { trigger: el, start: 'top 86%' }
            });
        });
        
        // Parallax en n√∫meros
        gsap.utils.toArray('.section-number').forEach(el => {
            gsap.to(el, {
                y: 100,
                opacity: 0.03,
                scrollTrigger: {
                    trigger: el.parentElement,
                    start: 'top bottom',
                    end: 'bottom top',
                    scrub: 1
                }
            });
        });
        
        // Especialidades
        gsap.utils.toArray('.especialidad-item').forEach((el, i) => {
            gsap.to(el, {
                opacity: 1,
                y: 0,
                duration: 1,
                delay: i * 0.1,
                scrollTrigger: { trigger: el, start: 'top 85%' }
            });
        });
        
        // Filosof√≠a
        gsap.utils.toArray('.filosofia-card').forEach((el, i) => {
            gsap.to(el, {
                opacity: 1,
                scale: 1,
                duration: 0.8,
                delay: i * 0.15,
                scrollTrigger: { trigger: el, start: 'top 85%' }
            });
        });
        
        // Proceso
        gsap.fromTo('.proceso-line',
            { scaleY: 0, transformOrigin: 'top' },
            {
                scaleY: 1,
                duration: 2,
                scrollTrigger: {
                    trigger: '.proceso-container',
                    start: 'top 60%'
                }
            }
        );
        
        gsap.utils.toArray('.proceso-step').forEach((el) => {
            gsap.to(el, {
                opacity: 1,
                x: 0,
                y: 0,
                duration: 1,
                scrollTrigger: { trigger: el, start: 'top 80%' }
            });
        });
        
        // Equipo
        gsap.utils.toArray('.equipo-card').forEach((el, i) => {
            gsap.to(el, {
                opacity: 1,
                y: 0,
                duration: 1,
                delay: i * 0.15,
                scrollTrigger: { trigger: el, start: 'top 85%' }
            });
        });
        
        // Testimonios
        gsap.utils.toArray('.testimonio').forEach((el, i) => {
            gsap.to(el, {
                opacity: 1,
                x: 0,
                duration: 1,
                delay: i * 0.2,
                scrollTrigger: { trigger: el, start: 'top 85%' }
            });
        });
        
        // Contacto
        gsap.utils.toArray('.info-item').forEach((el, i) => {
            gsap.to(el, {
                opacity: 1,
                x: 0,
                duration: 0.8,
                delay: i * 0.1,
                scrollTrigger: { trigger: el, start: 'top 88%' }
            });
        });
        
        gsap.to('.contacto-form', {
            opacity: 1,
            y: 0,
            duration: 1,
            scrollTrigger: { trigger: '.contacto-form', start: 'top 88%' }
        });
        
        // Header scroll
        ScrollTrigger.create({
            start: 'top -80',
            end: 99999,
            toggleClass: { className: 'scrolled', targets: 'header' }
        });
        
        // Parallax hero
        gsap.to('.hero-content', {
            y: 400,
            opacity: 0.2,
            scrollTrigger: {
                trigger: '.hero',
                start: 'top top',
                end: 'bottom top',
                scrub: 1.5
            }
        });
        
        gsap.to('#canvas-3d', {
            y: 300,
            scrollTrigger: {
                trigger: '.hero',
                start: 'top top',
                end: 'bottom top',
                scrub: 2
            }
        });
        
        // Mouse parallax
        const heroSection = document.querySelector('.hero');
        if(heroSection) {
            heroSection.addEventListener('mousemove', (e) => {
                const x = (e.clientX / window.innerWidth - 0.5) * 20;
                const y = (e.clientY / window.innerHeight - 0.5) * 20;
                gsap.to('.hero-content', {
                    x: x,
                    y: y,
                    duration: 1,
                    ease: 'power2.out'
                });
            });
        }
        
        // Scroll to top
        const scrollTop = document.querySelector('.scroll-top');
        window.addEventListener('scroll', () => {
            scrollTop.classList.toggle('visible', window.pageYOffset > 600);
        });
        
        function scrollToTop() {
            gsap.to(window, { duration: 1.5, scrollTo: 0, ease: 'power2.inOut' });
        }
        
        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(a => {
            a.addEventListener('click', e => {
                e.preventDefault();
                const target = document.querySelector(a.getAttribute('href'));
                if(target) {
                    gsap.to(window, {
                        duration: 1.5,
                        scrollTo: { y: target, offsetY: 100 },
                        ease: 'power2.inOut'
                    });
                }
            });
        });
        
        // Form
        function handleSubmit(e) {
            e.preventDefault();
            const data = new FormData(e.target);
            const nombre = data.get('nombre');
            
            gsap.timeline()
                .to('.contacto-form', { scale: 0.97, duration: 0.15 })
                .to('.contacto-form', { scale: 1.02, duration: 0.15 })
                .to('.contacto-form', {
                    scale: 1,
                    duration: 0.2,
                    onComplete: () => {
                        alert(`Dear ${nombre},\n\nYour confidential consultation request has been received.\n\nA senior partner will contact you within 24 hours via your provided phone number.\n\nFor immediate emergencies, please call our 24/7 hotline:\n+57 (310) 500-0000\n\n‚Äî MediLex Legal Team`);
                        e.target.reset();
                    }
                });
        }
        
    </script>
</body>
</html>
